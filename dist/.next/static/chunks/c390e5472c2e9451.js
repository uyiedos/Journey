(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10204,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(48425),r=a.forwardRef((e,a)=>(0,t.jsx)(s.Primitive.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r.displayName="Label";var i=e.i(25913),n=e.i(75157);let l=(0,i.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(r,{ref:s,className:(0,n.cn)(l(),e),...a}));o.displayName=r.displayName,e.s(["Label",()=>o],10204)},68148,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(30030),r=e.i(48425),i="Progress",[n,l]=(0,s.createContextScope)(i),[o,c]=n(i),d=a.forwardRef((e,a)=>{var s,i;let{__scopeProgress:n,value:l=null,max:c,getValueLabel:d=h,...m}=e;(c||0===c)&&!g(c)&&console.error((s=`${c}`,`Invalid prop \`max\` of value \`${s}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let u=g(c)?c:100;null===l||x(l,u)||console.error((i=`${l}`,`Invalid prop \`value\` of value \`${i}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let y=x(l,u)?l:null,v=f(y)?d(y,u):void 0;return(0,t.jsx)(o,{scope:n,value:y,max:u,children:(0,t.jsx)(r.Primitive.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":f(y)?y:void 0,"aria-valuetext":v,role:"progressbar","data-state":p(y,u),"data-value":y??void 0,"data-max":u,...m,ref:a})})});d.displayName=i;var m="ProgressIndicator",u=a.forwardRef((e,a)=>{let{__scopeProgress:s,...i}=e,n=c(m,s);return(0,t.jsx)(r.Primitive.div,{"data-state":p(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...i,ref:a})});function h(e,t){return`${Math.round(e/t*100)}%`}function p(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function f(e){return"number"==typeof e}function g(e){return f(e)&&!isNaN(e)&&e>0}function x(e,t){return f(e)&&!isNaN(e)&&e<=t&&e>=0}u.displayName=m;var y=e.i(75157);let v=a.forwardRef(({className:e,value:a,...s},r)=>(0,t.jsx)(d,{ref:r,className:(0,y.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...s,children:(0,t.jsx)(u,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})}));v.displayName=d.displayName,e.s(["Progress",()=>v],68148)},58709,e=>{"use strict";var t=e.i(43476),a=e.i(932),s=e.i(46462),r=e.i(19455),i=e.i(15288),n=e.i(22016),l=e.i(4997),o=e.i(90597),c=e.i(94983),d=e.i(79002);let m=(0,e.i(75254).default)("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);function u(e){let u,h,p,f,g,x,y=(0,a.c)(16),{children:v,action:w,fallback:j}=e,{user:b}=(0,s.useAuth)();if(b){let e;return y[0]!==v?(e=(0,t.jsx)(t.Fragment,{children:v}),y[0]=v,y[1]=e):e=y[1],e}if(j){let e;return y[2]!==j?(e=(0,t.jsx)(t.Fragment,{children:j}),y[2]=j,y[3]=e):e=y[3],e}y[4]===Symbol.for("react.memo_cache_sentinel")?(u={post:{title:"Sign in to Post",description:"Join our community to share your thoughts and devotionals",icon:m},comment:{title:"Sign in to Comment",description:"Share your thoughts and engage with the community",icon:c.MessageCircle},like:{title:"Sign in to Like",description:"Show appreciation for posts that inspire you",icon:o.Heart},friend:{title:"Sign in to Add Friends",description:"Connect with others on their spiritual journey",icon:d.UserPlus},devotional:{title:"Sign in to Create Devotionals",description:"Share your insights and inspire others",icon:m}},y[4]=u):u=y[4];let N=u[w],_=N.icon;return y[5]!==_?(h=(0,t.jsx)("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:(0,t.jsx)(_,{className:"h-6 w-6 text-primary"})}),y[5]=_,y[6]=h):h=y[6],y[7]!==N.title?(p=(0,t.jsx)(i.CardTitle,{className:"text-lg mb-2",children:N.title}),y[7]=N.title,y[8]=p):p=y[8],y[9]!==N.description?(f=(0,t.jsx)(i.CardDescription,{className:"mb-4",children:N.description}),y[9]=N.description,y[10]=f):f=y[10],y[11]===Symbol.for("react.memo_cache_sentinel")?(g=(0,t.jsx)(n.default,{href:"/auth",children:(0,t.jsxs)(r.Button,{className:"w-full",children:[(0,t.jsx)(l.LogIn,{className:"mr-2 h-4 w-4"}),"Sign In to Continue"]})}),y[11]=g):g=y[11],y[12]!==h||y[13]!==p||y[14]!==f?(x=(0,t.jsx)(i.Card,{className:"border-dashed border-muted-foreground/30 bg-muted/30",children:(0,t.jsxs)(i.CardContent,{className:"p-6 text-center",children:[h,p,f,g]})}),y[12]=h,y[13]=p,y[14]=f,y[15]=x):x=y[15],x}e.s(["AuthGuard",()=>u],58709)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},82651,e=>{"use strict";let t=[{id:"genesis",name:"Genesis",testament:"old",chapters:50},{id:"exodus",name:"Exodus",testament:"old",chapters:40},{id:"leviticus",name:"Leviticus",testament:"old",chapters:27},{id:"numbers",name:"Numbers",testament:"old",chapters:36},{id:"deuteronomy",name:"Deuteronomy",testament:"old",chapters:34},{id:"joshua",name:"Joshua",testament:"old",chapters:24},{id:"judges",name:"Judges",testament:"old",chapters:21},{id:"ruth",name:"Ruth",testament:"old",chapters:4},{id:"1-samuel",name:"1 Samuel",testament:"old",chapters:31},{id:"2-samuel",name:"2 Samuel",testament:"old",chapters:24},{id:"1-kings",name:"1 Kings",testament:"old",chapters:22},{id:"2-kings",name:"2 Kings",testament:"old",chapters:25},{id:"1-chronicles",name:"1 Chronicles",testament:"old",chapters:29},{id:"2-chronicles",name:"2 Chronicles",testament:"old",chapters:36},{id:"ezra",name:"Ezra",testament:"old",chapters:10},{id:"nehemiah",name:"Nehemiah",testament:"old",chapters:13},{id:"esther",name:"Esther",testament:"old",chapters:10},{id:"job",name:"Job",testament:"old",chapters:42},{id:"psalms",name:"Psalms",testament:"old",chapters:150},{id:"proverbs",name:"Proverbs",testament:"old",chapters:31},{id:"ecclesiastes",name:"Ecclesiastes",testament:"old",chapters:12},{id:"song-of-solomon",name:"Song of Solomon",testament:"old",chapters:8},{id:"isaiah",name:"Isaiah",testament:"old",chapters:66},{id:"jeremiah",name:"Jeremiah",testament:"old",chapters:52},{id:"lamentations",name:"Lamentations",testament:"old",chapters:5},{id:"ezekiel",name:"Ezekiel",testament:"old",chapters:48},{id:"daniel",name:"Daniel",testament:"old",chapters:12},{id:"hosea",name:"Hosea",testament:"old",chapters:14},{id:"joel",name:"Joel",testament:"old",chapters:3},{id:"amos",name:"Amos",testament:"old",chapters:9},{id:"obadiah",name:"Obadiah",testament:"old",chapters:1},{id:"jonah",name:"Jonah",testament:"old",chapters:4},{id:"micah",name:"Micah",testament:"old",chapters:7},{id:"nahum",name:"Nahum",testament:"old",chapters:3},{id:"habakkuk",name:"Habakkuk",testament:"old",chapters:3},{id:"zephaniah",name:"Zephaniah",testament:"old",chapters:3},{id:"haggai",name:"Haggai",testament:"old",chapters:2},{id:"zechariah",name:"Zechariah",testament:"old",chapters:14},{id:"malachi",name:"Malachi",testament:"old",chapters:4},{id:"matthew",name:"Matthew",testament:"new",chapters:28},{id:"mark",name:"Mark",testament:"new",chapters:16},{id:"luke",name:"Luke",testament:"new",chapters:24},{id:"john",name:"John",testament:"new",chapters:21},{id:"acts",name:"Acts",testament:"new",chapters:28},{id:"romans",name:"Romans",testament:"new",chapters:16},{id:"1-corinthians",name:"1 Corinthians",testament:"new",chapters:16},{id:"2-corinthians",name:"2 Corinthians",testament:"new",chapters:13},{id:"galatians",name:"Galatians",testament:"new",chapters:6},{id:"ephesians",name:"Ephesians",testament:"new",chapters:6},{id:"philippians",name:"Philippians",testament:"new",chapters:4},{id:"colossians",name:"Colossians",testament:"new",chapters:4},{id:"1-thessalonians",name:"1 Thessalonians",testament:"new",chapters:5},{id:"2-thessalonians",name:"2 Thessalonians",testament:"new",chapters:3},{id:"1-timothy",name:"1 Timothy",testament:"new",chapters:6},{id:"2-timothy",name:"2 Timothy",testament:"new",chapters:4},{id:"titus",name:"Titus",testament:"new",chapters:3},{id:"philemon",name:"Philemon",testament:"new",chapters:1},{id:"hebrews",name:"Hebrews",testament:"new",chapters:13},{id:"james",name:"James",testament:"new",chapters:5},{id:"1-peter",name:"1 Peter",testament:"new",chapters:5},{id:"2-peter",name:"2 Peter",testament:"new",chapters:3},{id:"1-john",name:"1 John",testament:"new",chapters:5},{id:"2-john",name:"2 John",testament:"new",chapters:1},{id:"3-john",name:"3 John",testament:"new",chapters:1},{id:"jude",name:"Jude",testament:"new",chapters:1},{id:"revelation",name:"Revelation",testament:"new",chapters:22}];e.s(["getBookById",0,e=>t.find(t=>t.id===e),"getBooksByTestament",0,e=>t.filter(t=>t.testament===e),"sampleVerses",0,[{id:"john-3-16",number:16,text:"For God so loved the world, that he gave his only Son, that whoever believes in him should not perish but have eternal life."},{id:"romans-8-28",number:28,text:"And we know that for those who love God all things work together for good, for those who are called according to his purpose."},{id:"philippians-4-13",number:13,text:"I can do all things through him who strengthens me."},{id:"jeremiah-29-11",number:11,text:"For I know the plans I have for you, declares the Lord, plans for welfare and not for evil, to give you a future and a hope."},{id:"isaiah-41-10",number:10,text:"Fear not, for I am with you; be not dismayed, for I am your God; I will strengthen you, I will help you, I will uphold you with my righteous right hand."}]])},93479,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,type:a,...r},i)=>(0,t.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...r}));r.displayName="Input",e.s(["Input",()=>r])},75830,86318,e=>{"use strict";var t=e.i(71645),a=e.i(43476),s=e.i(20783);function r(e){var r;let i,l=(r=e,(i=t.forwardRef((e,a)=>{let{children:r,...i}=e;if(t.isValidElement(r)){var n;let e,l,o=(n=r,(l=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(l=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),c=function(e,t){let a={...t};for(let s in t){let r=e[s],i=t[s];/^on[A-Z]/.test(s)?r&&i?a[s]=(...e)=>{let t=i(...e);return r(...e),t}:r&&(a[s]=r):"style"===s?a[s]={...r,...i}:"className"===s&&(a[s]=[r,i].filter(Boolean).join(" "))}return{...e,...a}}(i,r.props);return r.type!==t.Fragment&&(c.ref=a?(0,s.composeRefs)(a,o):o),t.cloneElement(r,c)}return t.Children.count(r)>1?t.Children.only(null):null})).displayName=`${r}.SlotClone`,i),o=t.forwardRef((e,s)=>{let{children:r,...i}=e,o=t.Children.toArray(r),c=o.find(n);if(c){let e=c.props.children,r=o.map(a=>a!==c?a:t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null);return(0,a.jsx)(l,{...i,ref:s,children:t.isValidElement(e)?t.cloneElement(e,void 0,r):null})}return(0,a.jsx)(l,{...i,ref:s,children:r})});return o.displayName=`${e}.Slot`,o}var i=Symbol("radix.slottable");function n(e){return t.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===i}function l(e){let i=e+"CollectionProvider",[n,l]=function(e,s=[]){let r=[],i=()=>{let a=r.map(e=>t.createContext(e));return function(s){let r=s?.[e]||a;return t.useMemo(()=>({[`__scope${e}`]:{...s,[e]:r}}),[s,r])}};return i.scopeName=e,[function(s,i){let n=t.createContext(i),l=r.length;r=[...r,i];let o=s=>{let{scope:r,children:i,...o}=s,c=r?.[e]?.[l]||n,d=t.useMemo(()=>o,Object.values(o));return(0,a.jsx)(c.Provider,{value:d,children:i})};return o.displayName=s+"Provider",[o,function(a,r){let o=r?.[e]?.[l]||n,c=t.useContext(o);if(c)return c;if(void 0!==i)return i;throw Error(`\`${a}\` must be used within \`${s}\``)}]},function(...e){let a=e[0];if(1===e.length)return a;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=s.reduce((t,{useScope:a,scopeName:s})=>{let r=a(e)[`__scope${s}`];return{...t,...r}},{});return t.useMemo(()=>({[`__scope${a.scopeName}`]:r}),[r])}};return s.scopeName=a.scopeName,s}(i,...s)]}(i),[o,c]=n(i,{collectionRef:{current:null},itemMap:new Map}),d=e=>{let{scope:s,children:r}=e,i=t.default.useRef(null),n=t.default.useRef(new Map).current;return(0,a.jsx)(o,{scope:s,itemMap:n,collectionRef:i,children:r})};d.displayName=i;let m=e+"CollectionSlot",u=r(m),h=t.default.forwardRef((e,t)=>{let{scope:r,children:i}=e,n=c(m,r),l=(0,s.useComposedRefs)(t,n.collectionRef);return(0,a.jsx)(u,{ref:l,children:i})});h.displayName=m;let p=e+"CollectionItemSlot",f="data-radix-collection-item",g=r(p),x=t.default.forwardRef((e,r)=>{let{scope:i,children:n,...l}=e,o=t.default.useRef(null),d=(0,s.useComposedRefs)(r,o),m=c(p,i);return t.default.useEffect(()=>(m.itemMap.set(o,{ref:o,...l}),()=>void m.itemMap.delete(o))),(0,a.jsx)(g,{...{[f]:""},ref:d,children:n})});return x.displayName=p,[{Provider:d,Slot:h,ItemSlot:x},function(a){let s=c(e+"CollectionConsumer",a);return t.default.useCallback(()=>{let e=s.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${f}]`));return Array.from(s.itemMap.values()).sort((e,a)=>t.indexOf(e.ref.current)-t.indexOf(a.ref.current))},[s.collectionRef,s.itemMap])},l]}var o=new WeakMap;function c(e,t){var a,s;let r,i,n;if("at"in Array.prototype)return Array.prototype.at.call(e,t);let l=(a=e,s=t,r=a.length,(n=(i=d(s))>=0?i:r+i)<0||n>=r?-1:n);return -1===l?void 0:e[l]}function d(e){return e!=e||0===e?0:Math.trunc(e)}(class e extends Map{#e;constructor(e){super(e),this.#e=[...super.keys()],o.set(this,!0)}set(e,t){return o.get(this)&&(this.has(e)?this.#e[this.#e.indexOf(e)]=e:this.#e.push(e)),super.set(e,t),this}insert(e,t,a){let s,r=this.has(t),i=this.#e.length,n=d(e),l=n>=0?n:i+n,o=l<0||l>=i?-1:l;if(o===this.size||r&&o===this.size-1||-1===o)return this.set(t,a),this;let c=this.size+ +!r;n<0&&l++;let m=[...this.#e],u=!1;for(let e=l;e<c;e++)if(l===e){let i=m[e];m[e]===t&&(i=m[e+1]),r&&this.delete(t),s=this.get(i),this.set(t,a)}else{u||m[e-1]!==t||(u=!0);let a=m[u?e:e-1],r=s;s=this.get(a),this.delete(a),this.set(a,r)}return this}with(t,a,s){let r=new e(this);return r.insert(t,a,s),r}before(e){let t=this.#e.indexOf(e)-1;if(!(t<0))return this.entryAt(t)}setBefore(e,t,a){let s=this.#e.indexOf(e);return -1===s?this:this.insert(s,t,a)}after(e){let t=this.#e.indexOf(e);if(-1!==(t=-1===t||t===this.size-1?-1:t+1))return this.entryAt(t)}setAfter(e,t,a){let s=this.#e.indexOf(e);return -1===s?this:this.insert(s+1,t,a)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return this.#e=[],super.clear()}delete(e){let t=super.delete(e);return t&&this.#e.splice(this.#e.indexOf(e),1),t}deleteAt(e){let t=this.keyAt(e);return void 0!==t&&this.delete(t)}at(e){let t=c(this.#e,e);if(void 0!==t)return this.get(t)}entryAt(e){let t=c(this.#e,e);if(void 0!==t)return[t,this.get(t)]}indexOf(e){return this.#e.indexOf(e)}keyAt(e){return c(this.#e,e)}from(e,t){let a=this.indexOf(e);if(-1===a)return;let s=a+t;return s<0&&(s=0),s>=this.size&&(s=this.size-1),this.at(s)}keyFrom(e,t){let a=this.indexOf(e);if(-1===a)return;let s=a+t;return s<0&&(s=0),s>=this.size&&(s=this.size-1),this.keyAt(s)}find(e,t){let a=0;for(let s of this){if(Reflect.apply(e,t,[s,a,this]))return s;a++}}findIndex(e,t){let a=0;for(let s of this){if(Reflect.apply(e,t,[s,a,this]))return a;a++}return -1}filter(t,a){let s=[],r=0;for(let e of this)Reflect.apply(t,a,[e,r,this])&&s.push(e),r++;return new e(s)}map(t,a){let s=[],r=0;for(let e of this)s.push([e[0],Reflect.apply(t,a,[e,r,this])]),r++;return new e(s)}reduce(...e){let[t,a]=e,s=0,r=a??this.at(0);for(let a of this)r=0===s&&1===e.length?a:Reflect.apply(t,this,[r,a,s,this]),s++;return r}reduceRight(...e){let[t,a]=e,s=a??this.at(-1);for(let a=this.size-1;a>=0;a--){let r=this.at(a);s=a===this.size-1&&1===e.length?r:Reflect.apply(t,this,[s,r,a,this])}return s}toSorted(t){return new e([...this.entries()].sort(t))}toReversed(){let t=new e;for(let e=this.size-1;e>=0;e--){let a=this.keyAt(e),s=this.get(a);t.set(a,s)}return t}toSpliced(...t){let a=[...this.entries()];return a.splice(...t),new e(a)}slice(t,a){let s=new e,r=this.size-1;if(void 0===t)return s;t<0&&(t+=this.size),void 0!==a&&a>0&&(r=a-1);for(let e=t;e<=r;e++){let t=this.keyAt(e),a=this.get(t);s.set(t,a)}return s}every(e,t){let a=0;for(let s of this){if(!Reflect.apply(e,t,[s,a,this]))return!1;a++}return!0}some(e,t){let a=0;for(let s of this){if(Reflect.apply(e,t,[s,a,this]))return!0;a++}return!1}}),e.s(["createCollection",()=>l],75830);var m=t.createContext(void 0);function u(e){let a=t.useContext(m);return e||a||"ltr"}e.s(["useDirection",()=>u],86318)},24687,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));r.displayName="Textarea",e.s(["Textarea",()=>r])},7233,87130,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],7233);let s=(0,t.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>s],87130)},56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},71930,e=>{"use strict";let t=(0,e.i(75254).default)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);e.s(["Bookmark",()=>t],71930)},94983,e=>{"use strict";let t=(0,e.i(75254).default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);e.s(["MessageCircle",()=>t],94983)},14764,e=>{"use strict";let t=(0,e.i(75254).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],14764)},62031,e=>{"use strict";let t=(0,e.i(75254).default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);e.s(["Share2",()=>t],62031)},48,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(90597),r=e.i(94983),i=e.i(62031),n=e.i(14764),l=e.i(19455),o=e.i(24687),c=e.i(99676),d=e.i(46462),m=e.i(27142);class u{static instance;static getInstance(){return u.instance||(u.instance=new u),u.instance}async toggleLike(e,t,a){try{let{data:s}=await m.supabaseService.getClient().from("likes").select("id").eq("user_id",a).eq("target_id",e).eq("target_type",t).maybeSingle();if(s)return await m.supabaseService.getClient().from("likes").delete().eq("user_id",a).eq("target_id",e).eq("target_type",t),await this.updateCount(e,t,"likes_count",-1),{liked:!1,count:await this.getCount(e,t,"likes_count")};return await m.supabaseService.getClient().from("likes").insert({user_id:a,target_id:e,target_type:t}),await this.updateCount(e,t,"likes_count",1),{liked:!0,count:await this.getCount(e,t,"likes_count")}}catch(e){throw console.error("Error toggling like:",e),e}}async hasUserLiked(e,t,a){try{let{data:s}=await m.supabaseService.getClient().from("likes").select("id").eq("user_id",a).eq("target_id",e).eq("target_type",t).maybeSingle();return!!s}catch(e){return console.error("Error checking like status:",e),!1}}async addComment(e,t,a,s){try{let{data:r,error:i}=await m.supabaseService.getClient().from("comments").insert({user_id:a,target_id:e,target_type:t,content:s.trim()}).select(`
          *,
          user:users(id, username, full_name, avatar_url)
        `).single();if(i)throw i;return await this.updateCount(e,t,"comments_count",1),r}catch(e){throw console.error("Error adding comment:",e),e}}async getComments(e,t){try{let{data:a,error:s}=await m.supabaseService.getClient().from("comments").select(`
          *,
          user:users(id, username, full_name, avatar_url)
        `).eq("target_id",e).eq("target_type",t).order("created_at",{ascending:!0});if(s)throw s;return a||[]}catch(e){return console.error("Error fetching comments:",e),[]}}async share(e,t,a){try{return await m.supabaseService.getClient().from("shares").insert({user_id:a,target_id:e,target_type:t}),await this.updateCount(e,t,"shares_count",1),{count:await this.getCount(e,t,"shares_count")}}catch(e){throw console.error("Error recording share:",e),e}}async getCount(e,t,a){try{let s="";switch(t){case"post":s="community_posts";break;case"devotional":s="devotionals";break;case"prayer":s="prayer_requests";break;default:return 0}let{data:r}=await m.supabaseService.getClient().from(s).select(a).eq("id",e).single();return r?.[a]||0}catch(e){return console.error("Error getting count:",e),0}}async updateCount(e,t,a,s){try{let r="";switch(t){case"post":r="community_posts";break;case"devotional":r="devotionals";break;case"prayer":r="prayer_requests";break;default:return}let{error:i}=await m.supabaseService.getClient().rpc("increment_count",{table_name:r,record_id:e,column_name:a,increment_value:s});if(i){let{data:t}=await m.supabaseService.getClient().from(r).select(a).eq("id",e).single();if(t){let i=Math.max(0,(t[a]||0)+s);await m.supabaseService.getClient().from(r).update({[a]:i}).eq("id",e)}}}catch(e){console.error("Error updating count:",e)}}async getUserSocialActivity(e){try{let[t,a,s]=await Promise.all([m.supabaseService.getClient().from("likes").select(`
            *,
            target:community_posts(id, content, created_at)
          `).eq("user_id",e).order("created_at",{ascending:!1}).limit(10),m.supabaseService.getClient().from("comments").select(`
            *,
            target:community_posts(id, content, created_at)
          `).eq("user_id",e).order("created_at",{ascending:!1}).limit(10),m.supabaseService.getClient().from("shares").select(`
            *,
            target:community_posts(id, content, created_at)
          `).eq("user_id",e).order("created_at",{ascending:!1}).limit(10)]);return{likes:t.data||[],comments:a.data||[],shares:s.data||[]}}catch(e){return console.error("Error fetching user social activity:",e),{likes:[],comments:[],shares:[]}}}}let h=u.getInstance();var p=e.i(75157);function f({targetId:e,targetType:m,initialLikes:u=0,initialComments:f=0,initialShares:g=0,showComments:x=!0,className:y=""}){let{user:v}=(0,d.useAuth)(),[w,j]=(0,a.useState)(!1),[b,N]=(0,a.useState)(u),[_,k]=(0,a.useState)(f),[C,S]=(0,a.useState)(g),[E,I]=(0,a.useState)(!1),[A,M]=(0,a.useState)(!1),[P,R]=(0,a.useState)(!1),[D,L]=(0,a.useState)([]),[z,B]=(0,a.useState)(!1),[T,q]=(0,a.useState)(""),[$,F]=(0,a.useState)(!1);(0,a.useEffect)(()=>{j(!0)},[]),(0,a.useEffect)(()=>{v&&w&&h.hasUserLiked(e,m,v.id).then(I)},[e,m,v,w]),(0,a.useEffect)(()=>{z&&x&&w&&O()},[z,e,m,x,w]);let O=async()=>{try{let t=await h.getComments(e,m);L(t),k(t.length)}catch(e){console.error("Error loading comments:",e)}},U=async()=>{if(!v||A||!w)return;M(!0);let t=!E,a=t?b+1:Math.max(0,b-1);I(t),N(a);try{let t=await h.toggleLike(e,m,v.id);N(t.count),I(t.liked)}catch(e){console.error("Error toggling like:",e),I(!t),N(b)}finally{M(!1)}},V=async()=>{if(v&&!P&&w){R(!0);try{let t=await h.share(e,m,v.id);S(t.count),navigator.share&&await navigator.share({title:`Check out this ${m}`,text:`Found this amazing ${m} on Journey!`,url:window.location.href})}catch(e){console.error("Error sharing:",e)}finally{R(!1)}}},J=async()=>{if(v&&T.trim()&&!$&&w){F(!0);try{let t=await h.addComment(e,m,v.id,T);L([t,...D]),k(e=>e+1),q("")}catch(e){console.error("Error adding comment:",e)}finally{F(!1)}}};return(0,t.jsxs)("div",{className:`space-y-4 ${y}`,children:[(0,t.jsx)("div",{className:"flex items-center justify-between pt-4 border-t",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(l.Button,{variant:"ghost",size:"sm",className:`text-muted-foreground hover:text-red-500 transition-colors ${E?"text-red-500":""}`,onClick:U,disabled:!v||A,children:[(0,t.jsx)(s.Heart,{className:`h-4 w-4 mr-1 ${E?"fill-current":""}`}),b]}),x&&(0,t.jsxs)(l.Button,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-blue-500 transition-colors",onClick:()=>B(!z),children:[(0,t.jsx)(r.MessageCircle,{className:"h-4 w-4 mr-1"}),_]}),(0,t.jsxs)(l.Button,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-green-500 transition-colors",onClick:V,disabled:!v||P,children:[(0,t.jsx)(i.Share2,{className:"h-4 w-4 mr-1"}),C]})]})}),x&&z&&(0,t.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[v&&(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsxs)(c.Avatar,{className:"h-8 w-8",children:[(0,t.jsx)(c.AvatarImage,{src:v.user_metadata?.avatar_url}),(0,t.jsx)(c.AvatarFallback,{children:v.email?.charAt(0)})]}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)(o.Textarea,{placeholder:"Share your thoughts...",value:T,onChange:e=>q(e.target.value),className:"min-h-[60px] resize-none"}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(l.Button,{size:"sm",onClick:J,disabled:!T.trim()||$,children:[(0,t.jsx)(n.Send,{className:"h-4 w-4 mr-1"}),$?"Posting...":"Post"]})})]})]}),(0,t.jsx)("div",{className:"space-y-3",children:0===D.length?(0,t.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:"No comments yet. Be the first to share your thoughts!"}):D.map(e=>(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsxs)(c.Avatar,{className:"h-8 w-8",children:[(0,t.jsx)(c.AvatarImage,{src:e.user?.avatar_url}),(0,t.jsx)(c.AvatarFallback,{children:e.user?.full_name?.charAt(0)||e.user?.username?.charAt(0)||"U"})]}),(0,t.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"font-medium text-sm",children:e.user?.full_name||e.user?.username||"Anonymous"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,p.formatTimeAgo)(new Date(e.created_at))})]}),(0,t.jsx)("p",{className:"text-sm text-gray-700",children:e.content})]})]},e.id))})]})]})}e.s(["SocialInteraction",()=>f],48)},25175,e=>{"use strict";var t=e.i(43476),a=e.i(932),s=e.i(15288),r=e.i(87486),i=e.i(19455),n=e.i(99676),l=e.i(71930),o=e.i(75157),c=e.i(48);function d(e){let r,d,u,h,p,f,g,x,y,v,w,j,b,N,_,k,C,S,E,I,A,M=(0,a.c)(51),{devotional:P}=e,R=P.verse?.text||P.verse_text||"",D=P.verse?`${P.verse.book||""} ${P.verse.chapter||""}:${P.verse.number||""}`:P.verse_reference||"",L=P.author_name||P.author||"Anonymous";M[0]!==P.created_at||M[1]!==P.date?(r=P.date?P.date instanceof Date?P.date:new Date(P.date):P.created_at?new Date(P.created_at):new Date,M[0]=P.created_at,M[1]=P.date,M[2]=r):r=M[2];let z=r;P.shares,M[3]!==P.tags?(d=P.tags||[],M[3]=P.tags,M[4]=d):d=M[4];let B=d;M[5]!==P.title?(u=(0,t.jsx)(s.CardTitle,{className:"text-lg",children:P.title}),M[5]=P.title,M[6]=u):u=M[6];let T=R&&D?`${R} - ${D}`:R||D;M[7]!==T?(h=(0,t.jsx)(s.CardDescription,{children:T}),M[7]=T,M[8]=h):h=M[8],M[9]!==u||M[10]!==h?(p=(0,t.jsxs)("div",{className:"space-y-1",children:[u,h]}),M[9]=u,M[10]=h,M[11]=p):p=M[11],M[12]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",children:(0,t.jsx)(l.Bookmark,{className:"h-4 w-4"})}),M[12]=f):f=M[12],M[13]!==p?(g=(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[p,f]}),M[13]=p,M[14]=g):g=M[14],M[15]!==L?(x=L.charAt(0).toUpperCase(),M[15]=L,M[16]=x):x=M[16],M[17]!==x?(y=(0,t.jsx)(n.Avatar,{className:"h-6 w-6",children:(0,t.jsx)(n.AvatarFallback,{children:x})}),M[17]=x,M[18]=y):y=M[18],M[19]!==L?(v=(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:L}),M[19]=L,M[20]=v):v=M[20],M[21]===Symbol.for("react.memo_cache_sentinel")?(w=(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"•"}),M[21]=w):w=M[21],M[22]!==z?(j=(0,o.formatTimeAgo)(z),M[22]=z,M[23]=j):j=M[23],M[24]!==j?(b=(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:j}),M[24]=j,M[25]=b):b=M[25],M[26]!==y||M[27]!==v||M[28]!==b?(N=(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[y,v,w,b]}),M[26]=y,M[27]=v,M[28]=b,M[29]=N):N=M[29],M[30]!==N||M[31]!==g?(_=(0,t.jsxs)(s.CardHeader,{children:[g,N]}),M[30]=N,M[31]=g,M[32]=_):_=M[32],M[33]!==P.content?(k=(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-3",children:P.content}),M[33]=P.content,M[34]=k):k=M[34],M[35]!==B?(C=B.map(m),M[35]=B,M[36]=C):C=M[36],M[37]!==C?(S=(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:C}),M[37]=C,M[38]=S):S=M[38];let q=P.likes_count||0,$=P.comments_count||0,F=P.shares_count||0;return M[39]!==P.id||M[40]!==q||M[41]!==$||M[42]!==F?(E=(0,t.jsx)(c.SocialInteraction,{targetId:P.id,targetType:"devotional",initialLikes:q,initialComments:$,initialShares:F,showComments:!1,className:"mb-4"}),M[39]=P.id,M[40]=q,M[41]=$,M[42]=F,M[43]=E):E=M[43],M[44]!==k||M[45]!==S||M[46]!==E?(I=(0,t.jsxs)(s.CardContent,{children:[k,S,E]}),M[44]=k,M[45]=S,M[46]=E,M[47]=I):I=M[47],M[48]!==_||M[49]!==I?(A=(0,t.jsxs)(s.Card,{className:"w-full",children:[_,I]}),M[48]=_,M[49]=I,M[50]=A):A=M[50],A}function m(e){return(0,t.jsxs)(r.Badge,{variant:"secondary",className:"text-xs",children:["#",e]},e)}e.s(["DevotionalCard",()=>d])},70630,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(85665),r=e.i(25175),i=e.i(19455),n=e.i(93479),l=e.i(15288),o=e.i(87486),c=e.i(24687),d=e.i(67489),m=e.i(68148),u=e.i(10204),h=e.i(75254);let p=(0,h.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var f=e.i(37727);let g=(0,h.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var x=e.i(31278),y=e.i(7471);let v=new class{MAX_FILE_SIZE=5242880;ALLOWED_TYPES=["image/jpeg","image/png","image/gif","image/webp"];BUCKET="images";async uploadImage(e,t,a,s=!1){try{this.validateFile(e);let r=e.name.split(".").pop(),i=`${t}/${Date.now()}.${r}`,{data:n,error:l}=await y.supabase.storage.from(this.BUCKET).upload(i,e,{cacheControl:"3600",upsert:!1});if(l)throw l;let o=await this.getImageDimensions(e),{data:c,error:d}=await y.supabase.from("images").insert([{user_id:t,filename:i,original_name:e.name,file_path:n.path,file_size:e.size,mime_type:e.type,width:o.width,height:o.height,alt_text:a||null,is_public:s}]).select().single();if(d)throw d;return c}catch(e){throw console.error("Error uploading image:",e),e}}async uploadMultipleImages(e,t,a){return Promise.all(e.map((e,s)=>this.uploadImage(e,t,a?.[s])))}getPublicUrl(e){let{data:t}=y.supabase.storage.from(this.BUCKET).getPublicUrl(e);return t.publicUrl}async getUserImages(e){try{let{data:t,error:a}=await y.supabase.from("images").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(a)throw a;return t||[]}catch(e){return console.error("Error fetching user images:",e),[]}}async deleteImage(e,t){try{let{data:a,error:s}=await y.supabase.from("images").select("file_path").eq("id",e).eq("user_id",t).single();if(s)throw s;let{error:r}=await y.supabase.storage.from(this.BUCKET).remove([a.file_path]);if(r)throw r;let{error:i}=await y.supabase.from("images").delete().eq("id",e).eq("user_id",t);if(i)throw i}catch(e){throw console.error("Error deleting image:",e),e}}async updateImage(e,t,a){try{let{data:s,error:r}=await y.supabase.from("images").update(a).eq("id",e).eq("user_id",t).select().single();if(r)throw r;return s}catch(e){throw console.error("Error updating image:",e),e}}async linkImageToDevotion(e,t,a=0){try{let{error:s}=await y.supabase.from("devotion_images").insert([{devotion_id:e,image_id:t,display_order:a}]);if(s)throw s}catch(e){throw console.error("Error linking image to devotion:",e),e}}async linkImageToReadingPlan(e,t,a=0){try{let{error:s}=await y.supabase.from("reading_plan_images").insert([{plan_id:e,image_id:t,display_order:a}]);if(s)throw s}catch(e){throw console.error("Error linking image to reading plan:",e),e}}async linkImageToPost(e,t,a=0){try{let{error:s}=await y.supabase.from("post_images").insert([{post_id:e,image_id:t,display_order:a}]);if(s)throw s}catch(e){throw console.error("Error linking image to post:",e),e}}async getDevotionImages(e){try{let{data:t,error:a}=await y.supabase.from("devotion_images").select(`
          images (*)
        `).eq("devotion_id",e).order("display_order",{ascending:!0});if(a)throw a;return t?.flatMap(e=>e.images)||[]}catch(e){return console.error("Error fetching devotion images:",e),[]}}async getReadingPlanImages(e){try{let{data:t,error:a}=await y.supabase.from("reading_plan_images").select(`
          images (*)
        `).eq("plan_id",e).order("display_order",{ascending:!0});if(a)throw a;return t?.flatMap(e=>e.images)||[]}catch(e){return console.error("Error fetching reading plan images:",e),[]}}async getPostImages(e){try{let{data:t,error:a}=await y.supabase.from("post_images").select(`
          images (*)
        `).eq("post_id",e).order("display_order",{ascending:!0});if(a)throw a;return t?.flatMap(e=>e.images)||[]}catch(e){return console.error("Error fetching post images:",e),[]}}createPreview(e){return new Promise((t,a)=>{let s=new FileReader;s.onload=()=>t(s.result),s.onerror=a,s.readAsDataURL(e)})}validateFile(e){if(e.size>this.MAX_FILE_SIZE)throw Error(`File size must be less than ${this.MAX_FILE_SIZE/1024/1024}MB`);if(!this.ALLOWED_TYPES.includes(e.type))throw Error(`File type must be one of: ${this.ALLOWED_TYPES.join(", ")}`)}getImageDimensions(e){return new Promise((t,a)=>{let s=new Image;s.onload=()=>{t({width:s.width,height:s.height})},s.onerror=a,s.src=URL.createObjectURL(e)})}async compressImage(e,t=1920,a=1080,s=.8){return new Promise(r=>{let i=document.createElement("canvas"),n=i.getContext("2d"),l=new Image;l.onload=()=>{let{width:o,height:c}=l;if(o>t||c>a){let e=Math.min(t/o,a/c);o*=e,c*=e}i.width=o,i.height=c,n?.drawImage(l,0,0,o,c),i.toBlob(t=>{t?r(new File([t],e.name,{type:e.type,lastModified:Date.now()})):r(e)},e.type,s)},l.src=URL.createObjectURL(e)})}};var w=e.i(46462);function j({onImagesChange:e,maxImages:s=5,maxFileSize:r=1048576,acceptedTypes:n=["image/jpeg","image/png","image/gif","image/webp"],className:o=""}){let{user:d}=(0,w.useAuth)(),h=(0,a.useRef)(null),[y,j]=(0,a.useState)([]),[b,N]=(0,a.useState)([]),[_,k]=(0,a.useState)(!1),C=(0,a.useCallback)(async e=>{if(!e||!d)return;let t=[];for(let a=0;a<e.length&&y.length+t.length<s;a++){let s=e[a];if(s.size>r){t.push({file:s,preview:"",error:`File size must be less than ${r/1024/1024}MB`});continue}if(!n.includes(s.type)){t.push({file:s,preview:"",error:`File type must be: ${n.join(", ")}`});continue}let i=await v.createPreview(s);t.push({file:s,preview:i,uploading:!0,progress:0})}j(e=>[...e,...t])},[d,y.length,s,r,n]),S=async(t,a)=>{if(d)try{let s=await v.compressImage(t.file);j(e=>e.map((e,t)=>t===a?{...e,progress:50}:e));let r=await v.uploadImage(s,d.id,t.alt_text);j(e=>e.map((e,t)=>t===a?{...e,uploading:!1,progress:100}:e)),N(e=>[...e,r]),e?.([...b,r])}catch(e){j(e=>e.map((e,t)=>t===a?{...e,uploading:!1,error:"Upload failed"}:e))}};return a.default.useEffect(()=>{y.forEach((e,t)=>{e.uploading&&0===e.progress&&S(e,t)})},[y]),(0,t.jsxs)("div",{className:`space-y-4 ${o}`,children:[y.length<s&&(0,t.jsx)(l.Card,{className:`border-2 border-dashed transition-colors ${_?"border-blue-500 bg-blue-50":"border-gray-300"}`,onDragOver:e=>{e.preventDefault(),k(!0)},onDragLeave:e=>{e.preventDefault(),k(!1)},onDrop:e=>{e.preventDefault(),k(!1),C(e.dataTransfer.files)},children:(0,t.jsxs)(l.CardContent,{className:"flex flex-col items-center justify-center py-8",children:[(0,t.jsx)(g,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Images"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Drag and drop images here, or click to select files"}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mb-4",children:["Max ",r/1024/1024,"MB per file • ",n.join(", ")]}),(0,t.jsxs)(i.Button,{onClick:()=>h.current?.click(),disabled:!d,children:[(0,t.jsx)(p,{className:"h-4 w-4 mr-2"}),"Select Images"]}),!d&&(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Please log in to upload images"})]})]})}),(0,t.jsx)("input",{ref:h,type:"file",multiple:!0,accept:n.join(","),onChange:e=>C(e.target.files),className:"hidden"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map((e,a)=>(0,t.jsxs)(l.Card,{className:"overflow-hidden",children:[(0,t.jsxs)("div",{className:"relative",children:[e.preview&&(0,t.jsx)("img",{src:e.preview,alt:e.alt_text||"",className:"w-full h-48 object-cover"}),e.uploading&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-white text-center",children:[(0,t.jsx)(x.Loader2,{className:"h-8 w-8 animate-spin mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-sm",children:"Uploading..."}),e.progress&&(0,t.jsx)(m.Progress,{value:e.progress,className:"w-32 mt-2"})]})}),e.error&&(0,t.jsx)("div",{className:"absolute inset-0 bg-red-500 bg-opacity-75 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-white text-center p-2",children:(0,t.jsx)("p",{className:"text-sm",children:e.error})})}),(0,t.jsx)(i.Button,{size:"sm",variant:"destructive",className:"absolute top-2 right-2 h-8 w-8 p-0",onClick:()=>{j(e=>e.filter((e,t)=>t!==a))},children:(0,t.jsx)(f.X,{className:"h-4 w-4"})})]}),(0,t.jsx)(l.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{htmlFor:`alt-text-${a}`,children:"Alt Text (Optional)"}),(0,t.jsx)(c.Textarea,{id:`alt-text-${a}`,placeholder:"Describe this image for accessibility...",value:e.alt_text||"",onChange:e=>{var t;return t=e.target.value,void j(e=>e.map((e,s)=>s===a?{...e,alt_text:t}:e))},disabled:e.uploading,rows:2})]})})]},a))}),y.length>0&&(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[y.filter(e=>e.uploading).length," uploading,",b.length," completed,",y.filter(e=>e.error).length," failed"]})]})}var b=e.i(82651),N=e.i(27142),_=e.i(69908),k=e.i(7233),C=e.i(56909);function S({onSave:e,onCancel:s}){let{user:r}=(0,w.useAuth)(),{refreshData:m}=(0,_.useUserData)(),[u,h]=(0,a.useState)(""),[p,g]=(0,a.useState)(""),[y,S]=(0,a.useState)(""),[E,I]=(0,a.useState)([]),[A,M]=(0,a.useState)(""),[P,R]=(0,a.useState)([]),[D,L]=(0,a.useState)(!1),z=r?.user_metadata?.full_name||r?.email?.split("@")[0]||"Anonymous",B=()=>{A.trim()&&!E.includes(A.trim())&&(I([...E,A.trim()]),M(""))},T=async()=>{if(!r)return void console.error("User not authenticated");if(!u.trim()||!p.trim())return void console.error("Title and content are required");L(!0);try{let t=b.sampleVerses.find(e=>e.id===y),a={title:u.trim(),content:p.trim(),verse_reference:t?`Verse ${t.number}`:void 0,verse_text:t?t.text:void 0,author_name:z,tags:E.length>0?E:void 0,is_public:!0},s=await N.supabaseService.createDevotionalContent(r.id,a);if(s){if(P.length>0)for(let e=0;e<P.length;e++)await v.linkImageToDevotion(s.id,P[e].id,e);await m(),e&&e(s),h(""),g(""),S(""),I([]),M(""),R([]),console.log("Devotional created successfully:",s)}else console.error("Failed to create devotional")}catch(e){console.error("Error creating devotional:",e)}finally{L(!1)}};return(0,t.jsxs)(l.Card,{className:"w-full max-w-4xl mx-auto",children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsxs)(l.CardTitle,{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Create New Devotional"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:s,disabled:D,children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:T,disabled:D||!u.trim()||!p.trim(),children:D?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.Save,{className:"h-4 w-4 mr-2"}),"Save Devotional"]})})]})]})}),(0,t.jsxs)(l.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Title *"}),(0,t.jsx)(n.Input,{placeholder:"Enter devotional title...",value:u,onChange:e=>h(e.target.value),disabled:D})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Bible Verse"}),(0,t.jsxs)(d.Select,{value:y,onValueChange:S,disabled:D,children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{placeholder:"Select a verse..."})}),(0,t.jsx)(d.SelectContent,{children:b.sampleVerses.map(e=>(0,t.jsx)(d.SelectItem,{value:e.id,children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"font-medium",children:["Verse ",e.number]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground line-clamp-2",children:e.text})]})},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Content *"}),(0,t.jsx)(c.Textarea,{placeholder:"Write your devotional content...",value:p,onChange:e=>g(e.target.value),rows:8,disabled:D})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Tags"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(n.Input,{placeholder:"Add a tag...",value:A,onChange:e=>M(e.target.value),onKeyPress:e=>"Enter"===e.key&&B(),disabled:D}),(0,t.jsx)(i.Button,{type:"button",onClick:B,disabled:D,children:(0,t.jsx)(k.Plus,{className:"h-4 w-4"})})]}),E.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:E.map(e=>(0,t.jsxs)(o.Badge,{variant:"secondary",className:"flex items-center space-x-1",children:[(0,t.jsxs)("span",{children:["#",e]}),(0,t.jsx)(f.X,{className:"h-3 w-3 cursor-pointer",onClick:()=>{I(E.filter(t=>t!==e))}})]},e))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Images (Optional)"}),(0,t.jsx)(j,{onImagesChange:R,maxImages:3,maxFileSize:1048576,className:"w-full"})]}),(u||p)&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Preview"}),(0,t.jsx)(l.Card,{children:(0,t.jsxs)(l.CardContent,{className:"p-4",children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:u||"Untitled"}),y&&(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mb-3 italic",children:['"',b.sampleVerses.find(e=>e.id===y)?.text,'"']}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:p||"No content..."}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{children:["By ",z]}),(0,t.jsx)("span",{children:"Just now"})]}),E.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:E.map(e=>(0,t.jsxs)(o.Badge,{variant:"outline",className:"text-xs",children:["#",e]},e))})]})})]})]})]})}var E=e.i(58709),I=e.i(55436),A=e.i(87130),M=e.i(90597);function P(){let[e,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(null),[m,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)([]),[f,g]=(0,a.useState)(!0);(0,a.useEffect)(()=>{x()},[]);let x=async()=>{try{g(!0);let{data:e,error:t}=await N.supabaseService.getClient().from("devotionals").select("*").eq("is_public",!0).order("created_at",{ascending:!1});t&&console.error("Error fetching public devotionals:",t);let{data:a,error:s}=await N.supabaseService.getClient().from("devotionals").select("*").eq("user_id",(await N.supabaseService.getClient().auth.getUser()).data.user?.id).order("created_at",{ascending:!1});s&&console.error("Error fetching user devotionals:",s);let r=[...a||[],...e||[]].filter((e,t,a)=>t===a.findIndex(t=>t.id===e.id));p(r)}catch(e){console.error("Error fetching devotionals:",e)}finally{g(!1)}},y=h.filter(t=>{let a=t.title.toLowerCase().includes(e.toLowerCase())||t.content.toLowerCase().includes(e.toLowerCase())||t.author_name&&t.author_name.toLowerCase().includes(e.toLowerCase()),s=!c||t.tags&&t.tags.includes(c);return a&&s}),v=Array.from(new Set(h.flatMap(e=>e.tags||[]))),w=async()=>{await x(),u(!1)};return m?(0,t.jsx)(s.Layout,{children:(0,t.jsx)("div",{className:"py-6",children:(0,t.jsx)(S,{onSave:w,onCancel:()=>u(!1)})})}):f?(0,t.jsx)(s.Layout,{children:(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading devotionals..."})]})})}):(0,t.jsx)(s.Layout,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Devotionals"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Daily reflections and spiritual insights to deepen your faith"})]}),(0,t.jsx)(E.AuthGuard,{action:"devotional",children:(0,t.jsxs)(i.Button,{onClick:()=>u(!0),children:[(0,t.jsx)(k.Plus,{className:"mr-2 h-4 w-4"}),"Create Devotional"]})})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(I.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(n.Input,{placeholder:"Search devotionals...",value:e,onChange:e=>l(e.target.value),className:"pl-10"})]}),(0,t.jsxs)(i.Button,{variant:"outline",children:[(0,t.jsx)(A.Filter,{className:"mr-2 h-4 w-4"}),"Filters"]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)(o.Badge,{variant:null===c?"default":"secondary",className:"cursor-pointer",onClick:()=>d(null),children:"All"}),v.map(e=>(0,t.jsxs)(o.Badge,{variant:c===e?"default":"secondary",className:"cursor-pointer",onClick:()=>d(e),children:["#",e]},e))]}),(0,t.jsx)("div",{className:"grid gap-6",children:y.map(e=>(0,t.jsx)(r.DevotionalCard,{devotional:e},e.id))}),0===y.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(M.Heart,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No devotionals found"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Try adjusting your search or filters to find what you're looking for, or create your own devotional."}),(0,t.jsxs)(i.Button,{className:"mt-4",onClick:()=>u(!0),children:[(0,t.jsx)(k.Plus,{className:"mr-2 h-4 w-4"}),"Create Your First Devotional"]})]})]})})}e.s(["default",()=>P],70630)}]);