(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,74886,e=>{"use strict";let s=(0,e.i(75254).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>s],74886)},25652,e=>{"use strict";let s=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>s],25652)},42009,e=>{"use strict";let s=(0,e.i(75254).default)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);e.s(["Award",()=>s],42009)},68148,e=>{"use strict";var s=e.i(43476),a=e.i(71645),r=e.i(30030),t=e.i(48425),l="Progress",[i,n]=(0,r.createContextScope)(l),[d,c]=i(l),o=a.forwardRef((e,a)=>{var r,l;let{__scopeProgress:i,value:n=null,max:c,getValueLabel:o=h,...x}=e;(c||0===c)&&!p(c)&&console.error((r=`${c}`,`Invalid prop \`max\` of value \`${r}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let m=p(c)?c:100;null===n||g(n,m)||console.error((l=`${n}`,`Invalid prop \`value\` of value \`${l}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let v=g(n,m)?n:null,f=j(v)?o(v,m):void 0;return(0,s.jsx)(d,{scope:i,value:v,max:m,children:(0,s.jsx)(t.Primitive.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":j(v)?v:void 0,"aria-valuetext":f,role:"progressbar","data-state":u(v,m),"data-value":v??void 0,"data-max":m,...x,ref:a})})});o.displayName=l;var x="ProgressIndicator",m=a.forwardRef((e,a)=>{let{__scopeProgress:r,...l}=e,i=c(x,r);return(0,s.jsx)(t.Primitive.div,{"data-state":u(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...l,ref:a})});function h(e,s){return`${Math.round(e/s*100)}%`}function u(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function j(e){return"number"==typeof e}function p(e){return j(e)&&!isNaN(e)&&e>0}function g(e,s){return j(e)&&!isNaN(e)&&e<=s&&e>=0}m.displayName=x;var v=e.i(75157);let f=a.forwardRef(({className:e,value:a,...r},t)=>(0,s.jsx)(o,{ref:t,className:(0,v.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:(0,s.jsx)(m,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})}));f.displayName=o.displayName,e.s(["Progress",()=>f],68148)},20278,e=>{"use strict";let s=(0,e.i(75254).default)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);e.s(["Target",()=>s],20278)},13979,e=>{"use strict";var s=e.i(43476),a=e.i(71645),r=e.i(85665),t=e.i(19455),l=e.i(15288),i=e.i(87486),n=e.i(99676),d=e.i(77572),c=e.i(68148),o=e.i(93479),x=e.i(29592),m=e.i(46462),h=e.i(69908),u=e.i(44109),j=e.i(27142),p=e.i(64030),g=e.i(58377),v=e.i(20278),f=e.i(61911),N=e.i(43553);let b=(0,e.i(75254).default)("medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);var y=e.i(42009),w=e.i(25652),k=e.i(30699),C=e.i(74886),T=e.i(69638);function S(){let{user:e}=(0,m.useAuth)(),S=(0,h.useUserData)();e&&S.user;let L=e?S.stats:null,[A,P]=(0,a.useState)(null),[_,R]=(0,a.useState)(!1),[U,$]=(0,a.useState)(!1),[M,I]=(0,a.useState)([]),[B,F]=(0,a.useState)([]),[D,E]=(0,a.useState)([]),[z,O]=(0,a.useState)(null),[q,G]=(0,a.useState)(!0);(0,a.useEffect)(()=>((async()=>{try{G(!0);let[s,a,r]=await Promise.all([j.supabaseService.getLeaderboard(50),j.supabaseService.getWeeklyLeaderboard(50),j.supabaseService.getStreakLeaderboard(50)]),t=(e,s=1)=>e.map((e,a)=>({id:e.id,username:e.username||"Anonymous",avatar:e.avatar_url||"",points:e.points||0,level:e.level||1,streak:e.streak||0,rank:s+a,change:e.rank_change||0,badges:[],weeklyPoints:e.points||0}));if(I(t(s)),F(t(a)),E(t(r)),e){let s=await j.supabaseService.getUserRank(e.id);O(s)}else O(null)}catch(e){console.error("Error loading leaderboard data:",e)}finally{G(!1)}})(),j.supabaseService.subscribeToLeaderboard(s=>{I(((e,s=1)=>e.map((e,a)=>({id:e.id,username:e.username||"Anonymous",avatar:e.avatar_url||"",points:e.points||0,level:e.level||1,streak:e.streak||0,rank:s+a,change:e.rank_change||0,badges:[],weeklyPoints:e.points||0})))(s)),e&&j.supabaseService.getUserRank(e.id).then(O)}),e&&j.supabaseService.subscribeToUserRanking(e.id,e=>{O(e.rank_position)}),()=>{j.supabaseService.unsubscribe("leaderboard_updates"),e&&j.supabaseService.unsubscribe(`user_ranking_${e.id}`)}),[e]);let H=e=>{switch(e){case 1:return(0,s.jsx)(N.Crown,{className:"h-6 w-6 text-yellow-500"});case 2:return(0,s.jsx)(b,{className:"h-6 w-6 text-gray-400"});case 3:return(0,s.jsx)(y.Award,{className:"h-6 w-6 text-orange-600"});default:return(0,s.jsxs)("span",{className:"text-lg font-bold text-muted-foreground",children:["#",e]})}},J=e=>e>0?(0,s.jsx)(w.TrendingUp,{className:"h-4 w-4 text-green-500"}):e<0?(0,s.jsx)(w.TrendingUp,{className:"h-4 w-4 text-red-500 rotate-180"}):(0,s.jsx)("div",{className:"h-4 w-4"}),W=async()=>{if(e)try{$(!0);let s=await u.referralService.getReferralInfo(e.id);P(s)}catch(e){console.error("Error generating referral link:",e)}finally{$(!1)}},K=async()=>{if(A?.referral_url)try{await navigator.clipboard.writeText(A.referral_url),R(!0),setTimeout(()=>R(!1),2e3)}catch(e){console.error("Error copying link:",e)}},V=e&&z?{rank:z,points:L?.points||0,level:L?.level||1,streak:L?.streak||0,change:0}:null;return(0,s.jsx)(r.Layout,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Leaderboard"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"See how you rank among the Journey community"})]}),(0,s.jsxs)(i.Badge,{className:"px-3 py-1.5 bg-linear-to-r from-purple-100 to-blue-100 text-purple-800 border-purple-200",children:[(0,s.jsx)(f.Users,{className:"mr-1 h-3 w-3"}),q?"Loading...":`${M.length} Members`]})]}),q&&(0,s.jsx)(l.Card,{children:(0,s.jsx)(l.CardContent,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("span",{children:"Loading leaderboard data..."})]})})}),V&&(0,s.jsx)(l.Card,{className:"bg-linear-to-r from-blue-50 to-purple-50 border-blue-200",children:(0,s.jsx)(l.CardContent,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-blue-600",children:["#",V.rank]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold",children:"Your Ranking"}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Level ",V.level," • ",V.points.toLocaleString()," points"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1 text-green-600",children:[J(V.change),(0,s.jsx)("span",{className:"text-sm font-medium",children:V.change>0?`+${V.change}`:V.change})]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"vs last week"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1 text-orange-600",children:[(0,s.jsx)(g.Flame,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"font-medium",children:V.streak})]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"day streak"})]})]})]})})}),!e&&!q&&(0,s.jsx)(l.Card,{className:"bg-linear-to-r from-gray-50 to-slate-50 border-gray-200",children:(0,s.jsx)(l.CardContent,{className:"p-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(p.Trophy,{className:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Join the Competition!"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"Sign up to see your ranking on the leaderboard and start earning points"}),(0,s.jsx)(t.Button,{className:"bg-linear-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:"Sign Up to Join"})]})})}),e&&(0,s.jsxs)(l.Card,{className:"bg-linear-to-r from-green-50 to-emerald-50 border-green-200",children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsxs)(l.CardTitle,{className:"flex items-center space-x-2",children:[(0,s.jsx)(k.Gift,{className:"h-5 w-5 text-green-600"}),(0,s.jsx)("span",{children:"Invite Friends & Earn Points"})]}),(0,s.jsx)(l.CardDescription,{children:"Share your referral link and earn 100 points for each friend who joins"})]}),(0,s.jsx)(l.CardContent,{className:"space-y-4",children:A?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(o.Input,{value:A.referral_url,readOnly:!0,className:"flex-1"}),(0,s.jsx)(t.Button,{onClick:K,variant:"outline",size:"sm",children:_?(0,s.jsx)(T.CheckCircle,{className:"h-4 w-4 text-green-600"}):(0,s.jsx)(C.Copy,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-lg font-bold text-green-600",children:A.total_referrals}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Total Referrals"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-lg font-bold text-blue-600",children:A.completed_referrals}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Completed"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-lg font-bold text-purple-600",children:A.points_earned}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Points Earned"})]})]}),(0,s.jsxs)(x.Alert,{children:[(0,s.jsx)(k.Gift,{className:"h-4 w-4"}),(0,s.jsxs)(x.AlertDescription,{children:["Your referral code: ",(0,s.jsx)("strong",{children:A.referral_code})]})]})]}):(0,s.jsxs)(t.Button,{onClick:W,disabled:U,className:"w-full",children:[U?(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):(0,s.jsx)(k.Gift,{className:"h-4 w-4 mr-2"}),"Generate Referral Link"]})})]}),(0,s.jsxs)(d.Tabs,{defaultValue:"overall",className:"space-y-6",children:[(0,s.jsxs)(d.TabsList,{className:"grid w-full grid-cols-3",children:[(0,s.jsx)(d.TabsTrigger,{value:"overall",children:"Overall"}),(0,s.jsx)(d.TabsTrigger,{value:"weekly",children:"Weekly"}),(0,s.jsx)(d.TabsTrigger,{value:"streaks",children:"Streaks"})]}),(0,s.jsx)(d.TabsContent,{value:"overall",className:"space-y-4",children:(0,s.jsx)("div",{className:"grid gap-4",children:M.map(a=>(0,s.jsx)(l.Card,{className:`hover:shadow-md transition-shadow ${e?.id===a.id?"ring-2 ring-primary":""}`,children:(0,s.jsxs)(l.CardContent,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-12 h-12",children:H(a.rank)}),(0,s.jsxs)(n.Avatar,{className:"h-12 w-12",children:[(0,s.jsx)(n.AvatarImage,{src:a.avatar}),(0,s.jsx)(n.AvatarFallback,{children:a.username.charAt(0)})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("h3",{className:"font-semibold",children:a.username}),(0,s.jsxs)(i.Badge,{className:(e=>{switch(e){case 1:return"bg-linear-to-r from-yellow-400 to-yellow-600 text-white border-yellow-500";case 2:return"bg-linear-to-r from-gray-300 to-gray-500 text-white border-gray-400";case 3:return"bg-linear-to-r from-orange-400 to-orange-600 text-white border-orange-500";default:return"bg-muted text-muted-foreground"}})(a.rank),children:["Level ",a.level]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[(0,s.jsxs)("span",{children:[a.points.toLocaleString()," points"]}),(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,s.jsx)(g.Flame,{className:"h-3 w-3 text-orange-500"}),(0,s.jsxs)("span",{children:[a.streak," day streak"]})]})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:a.badges.map(e=>(0,s.jsx)(i.Badge,{variant:"outline",className:"text-xs",children:e},e))})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[J(a.change),(0,s.jsx)("span",{className:`text-sm font-medium ${a.change>0?"text-green-600":a.change<0?"text-red-600":"text-muted-foreground"}`,children:a.change>0?`+${a.change}`:0===a.change?"—":a.change})]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"vs last week"})]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm mb-1",children:[(0,s.jsxs)("span",{className:"text-muted-foreground",children:["Progress to Level ",a.level+1]}),(0,s.jsxs)("span",{className:"text-muted-foreground",children:[1e3-a.points%1e3," pts"]})]}),(0,s.jsx)(c.Progress,{value:a.points%1e3/10,className:"h-2"})]})]})},a.id))})}),(0,s.jsxs)(d.TabsContent,{value:"weekly",className:"space-y-4",children:[(0,s.jsx)(l.Card,{className:"bg-linear-to-r from-green-50 to-emerald-50 border-green-200",children:(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsxs)(l.CardTitle,{className:"flex items-center space-x-2",children:[(0,s.jsx)(p.Trophy,{className:"h-5 w-5 text-green-600"}),(0,s.jsx)("span",{children:"Weekly Champions"})]}),(0,s.jsx)(l.CardDescription,{children:"Top performers this week"})]})}),(0,s.jsx)("div",{className:"grid gap-4",children:B.map(e=>(0,s.jsx)(l.Card,{className:"hover:shadow-md transition-shadow",children:(0,s.jsx)(l.CardContent,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-12 h-12",children:H(e.rank)}),(0,s.jsxs)(n.Avatar,{className:"h-12 w-12",children:[(0,s.jsx)(n.AvatarImage,{src:e.avatar}),(0,s.jsx)(n.AvatarFallback,{children:e.username.charAt(0)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold",children:e.username}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.weeklyPoints.toLocaleString()," points this week"]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.weeklyPoints.toLocaleString()}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"weekly points"})]})]})})},e.id))})]}),(0,s.jsxs)(d.TabsContent,{value:"streaks",className:"space-y-4",children:[(0,s.jsx)(l.Card,{className:"bg-linear-to-r from-orange-50 to-red-50 border-orange-200",children:(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsxs)(l.CardTitle,{className:"flex items-center space-x-2",children:[(0,s.jsx)(g.Flame,{className:"h-5 w-5 text-orange-600"}),(0,s.jsx)("span",{children:"Streak Masters"})]}),(0,s.jsx)(l.CardDescription,{children:"Users with the longest reading streaks"})]})}),(0,s.jsx)("div",{className:"grid gap-4",children:D.map(e=>(0,s.jsx)(l.Card,{className:"hover:shadow-md transition-shadow",children:(0,s.jsx)(l.CardContent,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-12 h-12",children:H(e.rank)}),(0,s.jsxs)(n.Avatar,{className:"h-12 w-12",children:[(0,s.jsx)(n.AvatarImage,{src:e.avatar}),(0,s.jsx)(n.AvatarFallback,{children:e.username.charAt(0)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold",children:e.username}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Level ",e.level," • ",e.points.toLocaleString()," points"]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1 text-2xl font-bold text-orange-600",children:[(0,s.jsx)(g.Flame,{className:"h-6 w-6"}),(0,s.jsx)("span",{children:e.streak})]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"day streak"})]})]})})},e.id))})]})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsxs)(l.CardTitle,{className:"flex items-center space-x-2",children:[(0,s.jsx)(v.Target,{className:"h-5 w-5 text-blue-600"}),(0,s.jsx)("span",{children:"Community Statistics"})]})}),(0,s.jsx)(l.CardContent,{children:(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:M.length}),(0,s.jsx)("div",{className:"text-sm text-blue-500",children:"Total Members"})]}),(0,s.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:M.filter(e=>e.streak>0).length}),(0,s.jsx)("div",{className:"text-sm text-green-500",children:"Active Today"})]}),(0,s.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:M.reduce((e,s)=>e+s.points,0).toLocaleString()}),(0,s.jsx)("div",{className:"text-sm text-purple-500",children:"Total Points"})]}),(0,s.jsxs)("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:Math.max(...M.map(e=>e.streak),0)}),(0,s.jsx)("div",{className:"text-sm text-orange-500",children:"Longest Streak"})]})]})})]})]})})}e.s(["default",()=>S,"dynamic",0,"force-dynamic"],13979)}]);