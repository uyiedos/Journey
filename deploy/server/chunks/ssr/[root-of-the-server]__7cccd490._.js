module.exports=[35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},30553,a=>{"use strict";var b=a.i(72131);a.i(35112);var c=a.i(11011),d=a.i(87924),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,c.createSlot)(`Primitive.${e}`),g=b.forwardRef((a,b)=>{let{asChild:c,...g}=a;return(0,d.jsx)(c?f:e,{...g,ref:b})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{});a.s(["Primitive",()=>e])},86304,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(68114);let e=(0,c.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{className:(0,d.cn)(e({variant:c}),a),...f})}a.s(["Badge",()=>f])},41675,a=>{"use strict";let b=(0,a.i(70106).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},60246,a=>{"use strict";let b=(0,a.i(70106).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);a.s(["Users",()=>b],60246)},41710,a=>{"use strict";let b=(0,a.i(70106).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],41710)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},53722,a=>{"use strict";let b=(0,a.i(70106).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);a.s(["BookOpen",()=>b],53722)},73390,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50104),e=a.i(30553),f="Progress",[g,h]=(0,d.createContextScope)(f),[i,j]=g(f),k=c.forwardRef((a,c)=>{var d,f;let{__scopeProgress:g,value:h=null,max:j,getValueLabel:k=n,...l}=a;(j||0===j)&&!q(j)&&console.error((d=`${j}`,`Invalid prop \`max\` of value \`${d}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let m=q(j)?j:100;null===h||r(h,m)||console.error((f=`${h}`,`Invalid prop \`value\` of value \`${f}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let s=r(h,m)?h:null,t=p(s)?k(s,m):void 0;return(0,b.jsx)(i,{scope:g,value:s,max:m,children:(0,b.jsx)(e.Primitive.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":p(s)?s:void 0,"aria-valuetext":t,role:"progressbar","data-state":o(s,m),"data-value":s??void 0,"data-max":m,...l,ref:c})})});k.displayName=f;var l="ProgressIndicator",m=c.forwardRef((a,c)=>{let{__scopeProgress:d,...f}=a,g=j(l,d);return(0,b.jsx)(e.Primitive.div,{"data-state":o(g.value,g.max),"data-value":g.value??void 0,"data-max":g.max,...f,ref:c})});function n(a,b){return`${Math.round(a/b*100)}%`}function o(a,b){return null==a?"indeterminate":a===b?"complete":"loading"}function p(a){return"number"==typeof a}function q(a){return p(a)&&!isNaN(a)&&a>0}function r(a,b){return p(a)&&!isNaN(a)&&a<=b&&a>=0}m.displayName=l;var s=a.i(68114);let t=c.forwardRef(({className:a,value:c,...d},e)=>(0,b.jsx)(k,{ref:e,className:(0,s.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...d,children:(0,b.jsx)(m,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(c||0)}%)`}})}));t.displayName=k.displayName,a.s(["Progress",()=>t],73390)},210,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},28223,a=>{"use strict";var b=a.i(10849);let c=new class{async getPublicReadingPlans(){try{let{data:a,error:c}=await b.supabase.from("reading_plans").select("*").eq("is_public",!0).order("created_at",{ascending:!1});if(c)throw c;return a||[]}catch(a){return console.error("Error fetching reading plans:",a),[]}}async getReadingPlanById(a){if(!a)return console.error("Error: No ID provided to getReadingPlanById"),null;try{console.log(`Fetching reading plan with ID: ${a}`);let{data:c,error:d}=await b.supabase.from("reading_plans").select("*").eq("id",a).single();if(d)throw console.error("Supabase error details:",{message:d.message,details:d.details,hint:d.hint}),d;if(!c)return console.error(`No reading plan found with ID: ${a}`),null;return c}catch(b){return console.error("Error in getReadingPlanById:",{error:b,errorString:String(b),errorObject:JSON.stringify(b,Object.getOwnPropertyNames(b)),planId:a}),null}}async startReadingPlan(a,c){try{let{data:d,error:e}=await b.supabase.from("user_reading_plans").insert([{user_id:a,plan_id:c,started_at:new Date().toISOString(),current_day:1,is_active:!0}]).select().single();if(e)throw e;return await this.awardPoints(a,10,"Started a reading plan"),d}catch(a){throw console.error("Error starting reading plan:",a),a}}async getUserReadingPlans(a){try{let{data:c,error:d}=await b.supabase.from("user_reading_plans").select(`
          *,
          reading_plans (*)
        `).eq("user_id",a).order("started_at",{ascending:!1});if(d)throw d;return c||[]}catch(a){return console.error("Error fetching user reading plans:",a),[]}}async getPlanProgress(a,c){try{let{data:d,error:e}=await b.supabase.from("reading_plan_progress").select("*").eq("user_id",a).eq("plan_id",c).order("day_number",{ascending:!0});if(e)throw e;return d||[]}catch(a){return console.error("Error fetching plan progress:",a),[]}}async completeDay(a,c,d,e){try{let{data:f,error:g}=await b.supabase.from("reading_plan_progress").upsert([{user_id:a,plan_id:c,day:d,completed:!0,completed_at:new Date().toISOString(),notes:e||null,points_earned:5}]).select().single();if(g)throw g;return await this.awardPoints(a,5,"Completed a reading plan day"),await b.supabase.from("user_reading_plans").update({current_day:d+1,updated_at:new Date().toISOString()}).eq("user_id",a).eq("plan_id",c),f}catch(a){throw console.error("Error completing day:",a),a}}async completeReadingPlan(a,c){try{let d=await this.getReadingPlanById(c);if(!d)throw Error("Plan not found");let e=2*d.duration,{data:f,error:g}=await b.supabase.from("user_reading_plans").update({is_active:!1,completed_at:new Date().toISOString()}).eq("user_id",a).eq("plan_id",c).select().single();if(g)throw g;return await this.awardPoints(a,e,"Completed a reading plan"),f}catch(a){throw console.error("Error completing reading plan:",a),a}}async awardPoints(a,c,d){try{let{error:e}=await b.supabase.rpc("increment_user_points",{p_user_id:a,p_points:c});if(e)throw e;let{error:f}=await b.supabase.from("activities").insert([{user_id:a,type:"reading_plan",description:d,points:c,created_at:new Date().toISOString()}]);if(f)throw f}catch(a){console.error("Error awarding points:",a)}}async getPlanStats(a){try{let{data:c,error:d}=await b.supabase.from("user_reading_plans").select("is_completed").eq("plan_id",a);if(d)throw d;let e=c?.length||0,f=c?.filter(a=>a.is_completed).length||0;return{totalParticipants:e,averageCompletion:e>0?f/e*100:0,totalCompletions:f}}catch(a){return console.error("Error fetching plan stats:",a),{totalParticipants:0,averageCompletion:0,totalCompletions:0}}}async createReadingPlan(a){try{let{data:c,error:d}=await b.supabase.from("reading_plans").insert([a]).select().single();if(d)throw d;return c}catch(a){throw console.error("Error creating reading plan:",a),a}}};a.s(["readingPlanService",0,c])},25015,a=>{"use strict";let b=(0,a.i(70106).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);a.s(["Play",()=>b],25015)},92443,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(91119),f=a.i(99570),g=a.i(86304),h=a.i(73390),i=a.i(53722),j=a.i(41675),k=a.i(41710),l=a.i(60246),m=a.i(25015),n=a.i(16201),o=a.i(210),p=a.i(38246),q=a.i(43897),r=a.i(28223);function s(){let a=(0,d.useParams)();(0,d.useRouter)();let{user:s}=(0,q.useAuth)(),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(!0),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let b=async()=>{try{let b=await r.readingPlanService.getReadingPlanById(a.id);if(b){if(u(b),s){let[b,c]=await Promise.all([r.readingPlanService.getUserReadingPlans(s.id),r.readingPlanService.getPlanProgress(s.id,a.id)]),d=b.find(b=>b.plan_id===a.id);w(d||null),y(c||[])}}else C("Plan not found")}catch(a){C("Plan not found")}finally{A(!1)}};a.id&&b()},[a.id,s]);let F=async()=>{if(s&&t)try{E(!0);let a=await r.readingPlanService.startReadingPlan(s.id,t.id);w(a)}catch(a){console.error("Error starting plan:",a)}finally{E(!1)}};if(z)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(B||!t)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Reading Plan Not Found"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:B||"This reading plan could not be found."}),(0,b.jsx)(f.Button,{asChild:!0,children:(0,b.jsxs)(p.default,{href:"/plans",children:[(0,b.jsx)(o.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back to Plans"]})})]})});let G=t.duration||0,H=t.participants||0,I=t.difficulty||"beginner",J=x.filter(a=>a.completed).length,K=G>0?J/G*100:0,L=!!v&&!!v.completed_at;return(0,b.jsx)("div",{className:"min-h-screen bg-background",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,b.jsx)(f.Button,{variant:"ghost",asChild:!0,className:"mb-6",children:(0,b.jsxs)(p.default,{href:"/plans",children:[(0,b.jsx)(o.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back to Plans"]})}),(0,b.jsxs)(e.Card,{className:"mb-6",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsx)(e.CardTitle,{className:"text-2xl md:text-3xl",children:t.title}),(0,b.jsx)(g.Badge,{variant:K>0?"default":"secondary",children:L?"Completed":K>0?"In Progress":"Not Started"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-4 text-muted-foreground",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(j.Calendar,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:[G," days"]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(l.Users,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:[H.toLocaleString()," participants"]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(k.Clock,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:I})]})]})]})}),(0,b.jsxs)(e.CardContent,{className:"space-y-6",children:[K>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{children:"Progress"}),(0,b.jsxs)("span",{children:[Math.round(K),"% complete"]})]}),(0,b.jsx)(h.Progress,{value:K,className:"h-2"})]}),(0,b.jsx)("div",{className:"prose prose-lg max-w-none",children:(0,b.jsx)("div",{className:"whitespace-pre-wrap text-foreground leading-relaxed",children:t.description})}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-3",children:[s?v?(0,b.jsx)(f.Button,{size:"lg",asChild:!0,children:(0,b.jsxs)(p.default,{href:`/plans/${a.id}/day/${v.current_day}`,children:[(0,b.jsx)(i.BookOpen,{className:"mr-2 h-4 w-4"}),J>0?`Continue Reading (Day ${v.current_day})`:`Start Reading (Day ${v.current_day})`]})}):(0,b.jsx)(f.Button,{size:"lg",onClick:F,disabled:D,children:D?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Starting..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Play,{className:"mr-2 h-4 w-4"}),"Start Plan"]})}):(0,b.jsx)(f.Button,{size:"lg",disabled:!0,children:"Please log in to start this plan"}),v&&!L&&(0,b.jsxs)(f.Button,{variant:"outline",size:"lg",children:[(0,b.jsx)(n.CheckCircle,{className:"mr-2 h-4 w-4"}),"Mark Complete"]})]})]})]}),(0,b.jsxs)(e.Card,{className:"mb-6",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{className:"text-xl",children:"Reading Schedule"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:t.readings&&t.readings.length>0?t.readings.map((c,d)=>{let e=c.day,h=x.find(a=>a.day===e),i=h?.completed||!1,j=v&&v.current_day===e&&!i;return(0,b.jsxs)("div",{className:`flex items-start justify-between p-4 border rounded-lg ${j?"bg-blue-50 border-blue-200":""}`,children:[(0,b.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,b.jsx)("div",{className:`w-4 h-4 rounded-full mt-1 ${i?"bg-green-500":j?"bg-blue-500":"bg-gray-300"}`}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("p",{className:"font-medium",children:["Day ",e,": ",c.title]}),c.passages&&c.passages.length>0&&(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Readings:"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:c.passages.map((a,c)=>(0,b.jsx)(g.Badge,{variant:"outline",className:"text-xs",children:a},c))})]}),c.devotional&&(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Devotional:"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground italic line-clamp-2",children:c.devotional})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:i?"Completed":j?"Current":"Not started"})]})]}),(0,b.jsx)("div",{className:"flex items-center space-x-2 ml-4",children:v&&(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,b.jsx)(p.default,{href:`/plans/${a.id}/day/${e}`,children:i?"Review":j?"Continue":"Read"})})})]},c.id||d)}):Array.from({length:G},(c,d)=>{let e=d+1,g=x.find(a=>a.day===e),h=g?.completed||!1,i=v&&v.current_day===e&&!h;return(0,b.jsxs)("div",{className:`flex items-center justify-between p-3 border rounded-lg ${i?"bg-blue-50 border-blue-200":""}`,children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:`w-4 h-4 rounded-full ${h?"bg-green-500":i?"bg-blue-500":"bg-gray-300"}`}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"font-medium",children:["Day ",e]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:h?"Completed":i?"Current":"Not started"})]})]}),(0,b.jsx)("div",{className:"flex items-center space-x-2",children:v&&(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,b.jsx)(p.default,{href:`/plans/${a.id}/day/${e}`,children:h?"Review":i?"Continue":"Read"})})})]},d)})})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{className:"text-xl",children:"Related Plans"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"More reading plans coming soon..."})})]})]})})}a.s(["default",()=>s])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__7cccd490._.js.map