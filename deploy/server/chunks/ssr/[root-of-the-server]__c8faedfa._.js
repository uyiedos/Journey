module.exports=[53569,a=>{"use strict";let b=(0,a.i(70106).default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);a.s(["Share2",()=>b],53569)},53722,a=>{"use strict";let b=(0,a.i(70106).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);a.s(["BookOpen",()=>b],53722)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},30553,a=>{"use strict";var b=a.i(72131);a.i(35112);var c=a.i(11011),d=a.i(87924),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,c.createSlot)(`Primitive.${e}`),g=b.forwardRef((a,b)=>{let{asChild:c,...g}=a;return(0,d.jsx)(c?f:e,{...g,ref:b})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{});a.s(["Primitive",()=>e])},86304,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(68114);let e=(0,c.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{className:(0,d.cn)(e({variant:c}),a),...f})}a.s(["Badge",()=>f])},41710,a=>{"use strict";let b=(0,a.i(70106).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],41710)},73390,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50104),e=a.i(30553),f="Progress",[g,h]=(0,d.createContextScope)(f),[i,j]=g(f),k=c.forwardRef((a,c)=>{var d,f;let{__scopeProgress:g,value:h=null,max:j,getValueLabel:k=n,...l}=a;(j||0===j)&&!q(j)&&console.error((d=`${j}`,`Invalid prop \`max\` of value \`${d}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let m=q(j)?j:100;null===h||r(h,m)||console.error((f=`${h}`,`Invalid prop \`value\` of value \`${f}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let s=r(h,m)?h:null,t=p(s)?k(s,m):void 0;return(0,b.jsx)(i,{scope:g,value:s,max:m,children:(0,b.jsx)(e.Primitive.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":p(s)?s:void 0,"aria-valuetext":t,role:"progressbar","data-state":o(s,m),"data-value":s??void 0,"data-max":m,...l,ref:c})})});k.displayName=f;var l="ProgressIndicator",m=c.forwardRef((a,c)=>{let{__scopeProgress:d,...f}=a,g=j(l,d);return(0,b.jsx)(e.Primitive.div,{"data-state":o(g.value,g.max),"data-value":g.value??void 0,"data-max":g.max,...f,ref:c})});function n(a,b){return`${Math.round(a/b*100)}%`}function o(a,b){return null==a?"indeterminate":a===b?"complete":"loading"}function p(a){return"number"==typeof a}function q(a){return p(a)&&!isNaN(a)&&a>0}function r(a,b){return p(a)&&!isNaN(a)&&a<=b&&a>=0}m.displayName=l;var s=a.i(68114);let t=c.forwardRef(({className:a,value:c,...d},e)=>(0,b.jsx)(k,{ref:e,className:(0,s.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...d,children:(0,b.jsx)(m,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(c||0)}%)`}})}));t.displayName=k.displayName,a.s(["Progress",()=>t],73390)},210,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},28223,a=>{"use strict";var b=a.i(10849);let c=new class{async getPublicReadingPlans(){try{let{data:a,error:c}=await b.supabase.from("reading_plans").select("*").eq("is_public",!0).order("created_at",{ascending:!1});if(c)throw c;return a||[]}catch(a){return console.error("Error fetching reading plans:",a),[]}}async getReadingPlanById(a){if(!a)return console.error("Error: No ID provided to getReadingPlanById"),null;try{console.log(`Fetching reading plan with ID: ${a}`);let{data:c,error:d}=await b.supabase.from("reading_plans").select("*").eq("id",a).single();if(d)throw console.error("Supabase error details:",{message:d.message,details:d.details,hint:d.hint}),d;if(!c)return console.error(`No reading plan found with ID: ${a}`),null;return c}catch(b){return console.error("Error in getReadingPlanById:",{error:b,errorString:String(b),errorObject:JSON.stringify(b,Object.getOwnPropertyNames(b)),planId:a}),null}}async startReadingPlan(a,c){try{let{data:d,error:e}=await b.supabase.from("user_reading_plans").insert([{user_id:a,plan_id:c,started_at:new Date().toISOString(),current_day:1,is_active:!0}]).select().single();if(e)throw e;return await this.awardPoints(a,10,"Started a reading plan"),d}catch(a){throw console.error("Error starting reading plan:",a),a}}async getUserReadingPlans(a){try{let{data:c,error:d}=await b.supabase.from("user_reading_plans").select(`
          *,
          reading_plans (*)
        `).eq("user_id",a).order("started_at",{ascending:!1});if(d)throw d;return c||[]}catch(a){return console.error("Error fetching user reading plans:",a),[]}}async getPlanProgress(a,c){try{let{data:d,error:e}=await b.supabase.from("reading_plan_progress").select("*").eq("user_id",a).eq("plan_id",c).order("day_number",{ascending:!0});if(e)throw e;return d||[]}catch(a){return console.error("Error fetching plan progress:",a),[]}}async completeDay(a,c,d,e){try{let{data:f,error:g}=await b.supabase.from("reading_plan_progress").upsert([{user_id:a,plan_id:c,day:d,completed:!0,completed_at:new Date().toISOString(),notes:e||null,points_earned:5}]).select().single();if(g)throw g;return await this.awardPoints(a,5,"Completed a reading plan day"),await b.supabase.from("user_reading_plans").update({current_day:d+1,updated_at:new Date().toISOString()}).eq("user_id",a).eq("plan_id",c),f}catch(a){throw console.error("Error completing day:",a),a}}async completeReadingPlan(a,c){try{let d=await this.getReadingPlanById(c);if(!d)throw Error("Plan not found");let e=2*d.duration,{data:f,error:g}=await b.supabase.from("user_reading_plans").update({is_active:!1,completed_at:new Date().toISOString()}).eq("user_id",a).eq("plan_id",c).select().single();if(g)throw g;return await this.awardPoints(a,e,"Completed a reading plan"),f}catch(a){throw console.error("Error completing reading plan:",a),a}}async awardPoints(a,c,d){try{let{error:e}=await b.supabase.rpc("increment_user_points",{p_user_id:a,p_points:c});if(e)throw e;let{error:f}=await b.supabase.from("activities").insert([{user_id:a,type:"reading_plan",description:d,points:c,created_at:new Date().toISOString()}]);if(f)throw f}catch(a){console.error("Error awarding points:",a)}}async getPlanStats(a){try{let{data:c,error:d}=await b.supabase.from("user_reading_plans").select("is_completed").eq("plan_id",a);if(d)throw d;let e=c?.length||0,f=c?.filter(a=>a.is_completed).length||0;return{totalParticipants:e,averageCompletion:e>0?f/e*100:0,totalCompletions:f}}catch(a){return console.error("Error fetching plan stats:",a),{totalParticipants:0,averageCompletion:0,totalCompletions:0}}}async createReadingPlan(a){try{let{data:c,error:d}=await b.supabase.from("reading_plans").insert([a]).select().single();if(d)throw d;return c}catch(a){throw console.error("Error creating reading plan:",a),a}}};a.s(["readingPlanService",0,c])},43659,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(91119),f=a.i(99570),g=a.i(86304),h=a.i(73390),i=a.i(210),j=a.i(53722),k=a.i(16201),l=a.i(41710),m=a.i(53569),n=a.i(38246),o=a.i(43897),p=a.i(28223);function q(){let a=(0,d.useParams)();(0,d.useRouter)();let{user:q}=(0,o.useAuth)(),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(!0),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(!1),H=a.id,I=parseInt(a.day);(0,c.useEffect)(()=>{let a=async()=>{try{if(!q||!H||!I)return void A("Invalid plan or day");let[a,b]=await Promise.all([p.readingPlanService.getReadingPlanById(H),p.readingPlanService.getUserReadingPlans(q.id)]);if(!a)return void A("Plan not found");s(a);let c=b.find(a=>a.plan_id===H);if(!c)return void A("You have not started this plan");u(c);let d=a.readings?.find(a=>a.day===I);w(d);let e=await p.readingPlanService.getPlanProgress(q.id,H),f=e?.find(a=>a.day===I);G(!!f?.completed)}catch(a){A("Failed to load content")}finally{y(!1)}};H&&I&&a()},[H,I,q]);let J=async()=>{if(q&&H)try{if(E(!0),await p.readingPlanService.completeDay(q.id,H,I,B),G(!0),t&&I>=t.current_day){let a=Math.min(I+1,r?.duration||I+1);u({...t,current_day:a})}}catch(a){console.error("Error completing day:",a)}finally{E(!1)}};if(x)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(z||!r||!v)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Content Not Found"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:z||"This content could not be found."}),(0,b.jsx)(f.Button,{asChild:!0,children:(0,b.jsxs)(n.default,{href:`/plans/${H}`,children:[(0,b.jsx)(i.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back to Plan"]})})]})});let K=(I-1)/(r.duration||1)*100;return(0,b.jsx)("div",{className:"min-h-screen bg-background",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)(f.Button,{variant:"ghost",asChild:!0,children:(0,b.jsxs)(n.default,{href:`/plans/${H}`,children:[(0,b.jsx)(i.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back to Plan"]})}),(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsxs)(g.Badge,{variant:"outline",children:["Day ",I," of ",r.duration]}),F&&(0,b.jsxs)(g.Badge,{variant:"default",className:"bg-green-500",children:[(0,b.jsx)(k.CheckCircle,{className:"mr-1 h-3 w-3"}),"Completed"]})]})]}),(0,b.jsx)(e.Card,{className:"mb-6",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{children:"Plan Progress"}),(0,b.jsxs)("span",{children:[Math.round(K),"% complete"]})]}),(0,b.jsx)(h.Progress,{value:K,className:"h-2"})]})})}),(0,b.jsxs)(e.Card,{className:"mb-6",children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{className:"text-2xl",children:v.title}),(0,b.jsxs)("div",{className:"flex items-center space-x-4 text-muted-foreground",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(j.BookOpen,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:[v.passages?.length||0," passages"]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(l.Clock,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"15 min read"})]})]})]}),(0,b.jsxs)(e.CardContent,{className:"space-y-6",children:[v.passages&&v.passages.length>0&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Today's Reading"}),v.passages.map((a,c)=>(0,b.jsxs)("div",{className:"p-4 bg-muted rounded-lg",children:[(0,b.jsx)("p",{className:"font-medium text-blue-600 mb-2",children:a}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Click to read the full passage in your Bible"})]},c))]}),v.devotional&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Devotional"}),(0,b.jsx)("div",{className:"prose prose-lg max-w-none",children:(0,b.jsx)("div",{className:"whitespace-pre-wrap text-foreground leading-relaxed",children:v.devotional})})]}),v.reflection&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Reflection Question"}),(0,b.jsx)("div",{className:"p-4 bg-blue-50 border-l-4 border-blue-400 rounded",children:(0,b.jsx)("p",{className:"text-blue-800",children:v.reflection})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Your Notes"}),(0,b.jsx)("textarea",{value:B,onChange:a=>C(a.target.value),placeholder:"Write your thoughts, prayers, or insights here...",className:"w-full h-32 p-3 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:F})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-3 pt-4",children:[F?(0,b.jsxs)(f.Button,{size:"lg",variant:"outline",disabled:!0,children:[(0,b.jsx)(k.CheckCircle,{className:"mr-2 h-4 w-4"}),"Day Completed"]}):(0,b.jsx)(f.Button,{size:"lg",onClick:J,disabled:D,children:D?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Marking Complete..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.CheckCircle,{className:"mr-2 h-4 w-4"}),"Mark Day Complete"]})}),(0,b.jsxs)(f.Button,{variant:"outline",size:"lg",children:[(0,b.jsx)(m.Share2,{className:"mr-2 h-4 w-4"}),"Share"]}),I<(r.duration||I)&&(0,b.jsx)(f.Button,{variant:"ghost",size:"lg",asChild:!0,children:(0,b.jsx)(n.default,{href:`/plans/${H}/day/${I+1}`,children:"Next Day â†’"})})]})]})]})]})})}a.s(["default",()=>q])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c8faedfa._.js.map