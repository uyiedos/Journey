module.exports=[24749,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(65402),e=a.i(88859),f=a.i(99570),g=a.i(66718),h=a.i(91119),i=a.i(72233),j=a.i(99272),k=a.i(60246),l=a.i(17371),m=a.i(87532),n=a.i(45222),o=a.i(43897),p=a.i(86130);function q(){let{user:a}=(0,o.useAuth)(),[d,e]=(0,c.useState)(""),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)("all"),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(!1),C=async()=>{if(a)try{let{data:b}=await p.supabaseService.getClient().from("friends").select(`
          *,
          friend:users(id, username, full_name, avatar_url, points, level, streak)
        `).or(`user_id.eq.${a.id},friend_id.eq.${a.id}`).eq("status","accepted"),{data:c}=await p.supabaseService.getClient().from("friends").select(`
          *,
          user:users(id, username, full_name, avatar_url, points, level, streak)
        `).eq("friend_id",a.id).eq("status","pending");v(b||[]),x(c||[])}catch(a){console.error("Error fetching friends:",a)}},D=async b=>{if(!b.trim()||!a)return void z([]);try{B(!0);let{data:c}=await p.supabaseService.getClient().from("users").select("id, username, full_name, avatar_url, points, level, streak").ilike("username",`%${b}%`).neq("id",a.id).limit(10);z(c||[])}catch(a){console.error("Error searching users:",a)}finally{B(!1)}},E=async b=>{if(a)try{let{error:c}=await p.supabaseService.getClient().from("friends").insert({user_id:a.id,friend_id:b,status:"pending"});if(c)throw c;z(a=>a.filter(a=>a.id!==b))}catch(a){console.error("Error sending friend request:",a)}},F=async a=>{try{let{error:b}=await p.supabaseService.getClient().from("friends").update({status:"accepted"}).eq("id",a);if(b)throw b;C()}catch(a){console.error("Error accepting friend request:",a)}};return(0,c.useEffect)(()=>{a&&C()},[a]),(0,c.useEffect)(()=>{let a=setTimeout(()=>{D(d)},300);return()=>clearTimeout(a)},[d]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Friends"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Connect with fellow believers on their spiritual journey"})]}),(0,b.jsx)(j.AuthGuard,{action:"friend",children:(0,b.jsxs)(f.Button,{children:[(0,b.jsx)(l.UserPlus,{className:"mr-2 h-4 w-4"}),"Find Friends"]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-500",children:u.length}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Friends"})]})}),(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-500",children:w.length}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Friend Requests"})]})}),(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-purple-500",children:"0"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Online Now"})]})})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Find Friends"})}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(m.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(g.Input,{placeholder:"Search for users by username...",value:d,onChange:a=>e(a.target.value),className:"pl-10"})]}),A&&(0,b.jsx)("div",{className:"text-center py-4",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto"})}),y.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h4",{className:"font-medium",children:"Search Results"}),y.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsxs)(i.Avatar,{className:"h-8 w-8",children:[(0,b.jsx)(i.AvatarImage,{src:a.avatar_url}),(0,b.jsx)(i.AvatarFallback,{children:a.username?.charAt(0)||"U"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.full_name||a.username}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Level ",a.level," • ",a.points," points"]})]})]}),(0,b.jsxs)(f.Button,{size:"sm",onClick:()=>E(a.id),children:[(0,b.jsx)(l.UserPlus,{className:"h-4 w-4 mr-1"}),"Add Friend"]})]},a.id))]})]})]}),w.length>0&&(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Friend Requests"})}),(0,b.jsx)(h.CardContent,{className:"space-y-2",children:w.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsxs)(i.Avatar,{className:"h-8 w-8",children:[(0,b.jsx)(i.AvatarImage,{src:a.user?.avatar_url}),(0,b.jsx)(i.AvatarFallback,{children:a.user?.username?.charAt(0)||"U"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.user?.full_name||a.user?.username}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Level ",a.user?.level," • ",a.user?.points," points"]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{size:"sm",onClick:()=>F(a.id),children:"Accept"}),(0,b.jsx)(f.Button,{size:"sm",variant:"outline",children:"Decline"})]})]},a.id))})]}),u.length>0&&(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Your Friends"})}),(0,b.jsx)(h.CardContent,{className:"space-y-2",children:u.map(a=>{let c=a.user||a.friend;return(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsxs)(i.Avatar,{className:"h-8 w-8",children:[(0,b.jsx)(i.AvatarImage,{src:c?.avatar_url}),(0,b.jsx)(i.AvatarFallback,{children:c?.username?.charAt(0)||"U"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:c?.full_name||c?.username}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Level ",c?.level," • ",c?.points," points"]})]})]}),(0,b.jsxs)(f.Button,{size:"sm",variant:"outline",children:[(0,b.jsx)(n.MessageCircle,{className:"h-4 w-4 mr-1"}),"Message"]})]},a.id)})})]}),0===u.length&&0===w.length&&0===y.length&&(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardContent,{className:"text-center py-12",children:[(0,b.jsx)(k.Users,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No friends yet"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Start searching for users above to build your spiritual community!"})]})})]})}var r=a.i(86304),s=a.i(92759),t=a.i(70106);let u=(0,t.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),v=(0,t.default)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),w=(0,t.default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var x=a.i(7428);let y=(0,t.default)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);function z(){let[a,d]=(0,c.useState)(null),[e,h]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),l=(0,c.useRef)(null),n=[],o=n.filter(a=>a.participantName.toLowerCase().includes(j.toLowerCase())),p=n.find(b=>b.id===a),q=[];(0,c.useEffect)(()=>{l.current?.scrollIntoView({behavior:"smooth"})},[q]);let t=a=>{let b=Math.floor((new Date().getTime()-a.getTime())/36e5);return b<1?"just now":b<24?`${b}h ago`:a.toLocaleDateString()},z=()=>{e.trim()&&(console.log("Sending message:",e),h(""))};return(0,b.jsxs)("div",{className:"flex h-[600px] border rounded-lg overflow-hidden",children:[(0,b.jsxs)("div",{className:"w-80 border-r flex flex-col",children:[(0,b.jsxs)("div",{className:"p-4 border-b",children:[(0,b.jsx)("h3",{className:"font-semibold mb-3",children:"Messages"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(m.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(g.Input,{placeholder:"Search conversations...",value:j,onChange:a=>k(a.target.value),className:"pl-10"})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto",children:o.map(c=>(0,b.jsx)("div",{onClick:()=>d(c.id),className:`p-4 border-b cursor-pointer hover:bg-muted/50 transition-colors ${a===c.id?"bg-muted":""}`,children:(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)(i.Avatar,{className:"h-10 w-10",children:[(0,b.jsx)(i.AvatarImage,{src:c.participantAvatar}),(0,b.jsx)(i.AvatarFallback,{children:c.participantName.charAt(0)})]}),c.isOnline&&(0,b.jsx)("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-background"})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h4",{className:"font-medium truncate",children:c.participantName}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:t(c.lastMessageTime)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:c.lastMessage}),c.unreadCount>0&&(0,b.jsx)(r.Badge,{variant:"destructive",className:"ml-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:c.unreadCount})]})]})]})},c.id))})]}),a?(0,b.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,b.jsxs)("div",{className:"p-4 border-b flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)(i.Avatar,{className:"h-8 w-8",children:[(0,b.jsx)(i.AvatarImage,{src:p?.participantAvatar}),(0,b.jsx)(i.AvatarFallback,{children:p?.participantName.charAt(0)})]}),p?.isOnline&&(0,b.jsx)("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 bg-green-500 rounded-full border-2 border-background"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium",children:p?.participantName}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:p?.isOnline?"Active now":"Offline"})]})]}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(u,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(v,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(w,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[q.map(a=>(0,b.jsx)("div",{className:`flex ${a.isOwn?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`flex space-x-2 max-w-[70%] ${a.isOwn?"flex-row-reverse space-x-reverse":""}`,children:[!a.isOwn&&(0,b.jsxs)(i.Avatar,{className:"h-8 w-8",children:[(0,b.jsx)(i.AvatarImage,{src:a.senderAvatar}),(0,b.jsx)(i.AvatarFallback,{children:a.senderName.charAt(0)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:`rounded-lg px-3 py-2 ${a.isOwn?"bg-primary text-primary-foreground":"bg-muted"}`,children:(0,b.jsx)("p",{className:"text-sm",children:a.content})}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1 px-1",children:t(a.timestamp)})]})]})},a.id)),(0,b.jsx)("div",{ref:l})]}),(0,b.jsx)("div",{className:"p-4 border-t",children:(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(y,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(g.Input,{placeholder:"Type a message...",value:e,onChange:a=>h(a.target.value),onKeyPress:a=>"Enter"===a.key&&z(),className:"pr-10"}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"absolute right-1 top-1",children:(0,b.jsx)(x.Smile,{className:"h-4 w-4"})})]}),(0,b.jsx)(f.Button,{onClick:z,disabled:!e.trim(),children:(0,b.jsx)(s.Send,{className:"h-4 w-4"})})]})})]}):(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"h-16 w-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(s.Send,{className:"h-8 w-8 text-muted-foreground"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Select a conversation"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Choose a friend from the list to start chatting"})]})})]})}var A=a.i(14574),B=a.i(29246),C=a.i(70430),D=a.i(75083),E=a.i(71641),F=a.i(56889),G=a.i(15618),H=a.i(53722);let I=(0,t.default)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var J=a.i(8406),K=a.i(96221);function L({children:a,onPostCreated:d}){let{user:e}=(0,o.useAuth)(),{user:h}=(0,E.useUserData)(),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[q,s]=(0,c.useState)(""),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(!1),[z,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(""),[O,P]=(0,c.useState)("devotional"),Q=()=>{v.trim()&&!t.includes(v.trim())&&(u([...t,v.trim()]),w(""))},R=a=>{u(t.filter(b=>b!==a))},S=async()=>{if(M.trim()){L(!0);try{let a="";switch(O){case"devotional":let b=F.aiService.generateDevotional("",M);a=b.main_message+"\n\nApplication: "+b.application+"\n\nPrayer: "+b.prayer,b.verse&&(n(b.verse),s(b.verse_text));break;case"reflection":let c=F.aiService.generateBibleStudy(M);a="Topic: "+c.topic+"\n\nKey Themes:\n"+c.main_themes.join("\n")+"\n\nLife Application: "+c.life_application;break;case"prayer":let d=F.aiService.getPrayerGuidance(M);a="Prayer Focus: "+d.title+"\n\nScripture: "+d.scripture+"\n\nPrayer Points:\n"+d.prayer_points.join("\n")+"\n\nSample Prayer: "+d.sample_prayer}l(a),u([...t,O])}catch(a){console.error("Error generating AI content:",a),alert("Failed to generate content. Please try again.")}finally{L(!1)}}},T=async a=>{if(a.preventDefault(),e&&k.trim()){y(!0);try{let{data:a,error:b}=await p.supabaseService.getClient().from("community_posts").insert({user_id:e.id,content:k.trim(),verse_reference:m.trim()||null,verse_text:q.trim()||null,tags:t.length>0?t:null,likes_count:0,comments_count:0,shares_count:0}).select().single();if(b)throw console.error("Error creating post:",b),b;let c=await p.supabaseService.getUserStats(e.id);await p.supabaseService.updateUserStats(e.id,{community_posts:(c?.community_posts||0)+1}),await p.supabaseService.addPoints(e.id,5),l(""),n(""),s(""),u([]),w(""),j(!1),d?.(),console.log("Post created successfully:",a)}catch(a){console.error("Error creating post:",a)}finally{y(!1)}}};return(0,b.jsxs)(A.Dialog,{open:i,onOpenChange:j,children:[(0,b.jsx)(A.DialogTrigger,{asChild:!0,children:a}),(0,b.jsxs)(A.DialogContent,{className:"sm:max-w-[600px] bg-background border-2 shadow-xl",children:[(0,b.jsx)(A.DialogHeader,{className:"border-b pb-4",children:(0,b.jsxs)(A.DialogTitle,{className:"flex items-center gap-2 text-xl",children:[(0,b.jsx)(G.Plus,{className:"h-5 w-5"}),"Create New Post"]})}),(0,b.jsxs)(D.Tabs,{defaultValue:"manual",className:"w-full",children:[(0,b.jsxs)(D.TabsList,{className:"grid w-full grid-cols-2 bg-muted border-2",children:[(0,b.jsx)(D.TabsTrigger,{value:"manual",className:"data-[state=active]:bg-background data-[state=active]:shadow-sm",children:"Manual"}),(0,b.jsxs)(D.TabsTrigger,{value:"ai",className:"flex items-center gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[(0,b.jsx)(J.Sparkles,{className:"h-4 w-4"}),"AI Assist"]})]}),(0,b.jsx)(D.TabsContent,{value:"manual",className:"space-y-4",children:(0,b.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(C.Label,{htmlFor:"content",className:"text-base font-medium",children:"Share your thoughts..."}),(0,b.jsx)(B.Textarea,{id:"content",placeholder:"What's on your mind? Share your spiritual journey, insights, or prayer requests...",value:k,onChange:a=>l(a.target.value),className:"min-h-[100px] border-2 bg-background resize-none focus:ring-2 focus:ring-primary",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(C.Label,{htmlFor:"verse-reference",className:"text-base font-medium",children:[(0,b.jsx)(H.BookOpen,{className:"inline h-4 w-4 mr-1"}),"Verse Reference (Optional)"]}),(0,b.jsx)(g.Input,{id:"verse-reference",placeholder:"e.g., John 3:16",value:m,onChange:a=>n(a.target.value),className:"border-2 bg-background focus:ring-2 focus:ring-primary"})]}),m&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(C.Label,{htmlFor:"verse-text",className:"text-base font-medium",children:"Verse Text (Optional)"}),(0,b.jsx)(B.Textarea,{id:"verse-text",placeholder:"Enter the verse text...",value:q,onChange:a=>s(a.target.value),className:"min-h-[60px] border-2 bg-background resize-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(C.Label,{htmlFor:"tags",children:[(0,b.jsx)(I,{className:"inline h-4 w-4 mr-1"}),"Tags (Optional)"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Input,{id:"tags",placeholder:"Add a tag...",value:v,onChange:a=>w(a.target.value),onKeyPress:a=>"Enter"===a.key&&(a.preventDefault(),Q())}),(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:Q,children:"Add"})]}),t.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:t.map(a=>(0,b.jsxs)(r.Badge,{variant:"secondary",className:"cursor-pointer",children:["#",a,(0,b.jsx)("button",{type:"button",onClick:()=>R(a),className:"ml-1 text-xs hover:text-destructive",children:"×"})]},a))})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>j(!1),children:"Cancel"}),(0,b.jsx)(f.Button,{type:"submit",disabled:!k.trim()||x,children:x?"Posting...":"Share Post"})]})]})}),(0,b.jsxs)(D.TabsContent,{value:"ai",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(C.Label,{htmlFor:"ai-type",children:"Content Type"}),(0,b.jsxs)("select",{id:"ai-type",value:O,onChange:a=>P(a.target.value),className:"w-full p-2 border rounded-md bg-background",children:[(0,b.jsx)("option",{value:"devotional",children:"Devotional"}),(0,b.jsx)("option",{value:"reflection",children:"Bible Reflection"}),(0,b.jsx)("option",{value:"prayer",children:"Prayer Guide"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(C.Label,{htmlFor:"ai-topic",children:"Topic or Theme"}),(0,b.jsx)(g.Input,{id:"ai-topic",placeholder:"e.g., Faith, Prayer, Forgiveness, God's Love...",value:M,onChange:a=>N(a.target.value)})]}),(0,b.jsx)(f.Button,{type:"button",onClick:S,disabled:!M.trim()||z,className:"w-full",children:z?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(K.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(J.Sparkles,{className:"mr-2 h-4 w-4"}),"Generate Content"]})}),k&&(0,b.jsxs)("div",{className:"border rounded-lg p-4 bg-muted/50",children:[(0,b.jsx)(C.Label,{className:"text-sm font-medium",children:"Generated Content"}),(0,b.jsx)(B.Textarea,{value:k,onChange:a=>l(a.target.value),className:"mt-2 min-h-[150px]",placeholder:"AI-generated content will appear here..."})]})]}),(0,b.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(C.Label,{htmlFor:"verse-reference-ai",children:[(0,b.jsx)(H.BookOpen,{className:"inline h-4 w-4 mr-1"}),"Verse Reference (Optional)"]}),(0,b.jsx)(g.Input,{id:"verse-reference-ai",placeholder:"e.g., John 3:16",value:m,onChange:a=>n(a.target.value)})]}),m&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(C.Label,{htmlFor:"verse-text-ai",children:"Verse Text (Optional)"}),(0,b.jsx)(B.Textarea,{id:"verse-text-ai",placeholder:"Enter the verse text...",value:q,onChange:a=>s(a.target.value),className:"min-h-[60px]"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(C.Label,{htmlFor:"tags-ai",children:[(0,b.jsx)(I,{className:"inline h-4 w-4 mr-1"}),"Tags (Optional)"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Input,{id:"tags-ai",placeholder:"Add a tag...",value:v,onChange:a=>w(a.target.value),onKeyPress:a=>"Enter"===a.key&&(a.preventDefault(),Q())}),(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:Q,children:"Add"})]}),t.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:t.map(a=>(0,b.jsxs)(r.Badge,{variant:"secondary",className:"cursor-pointer",children:["#",a,(0,b.jsx)("button",{type:"button",onClick:()=>R(a),className:"ml-1 text-xs hover:text-destructive",children:"×"})]},a))})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>j(!1),children:"Cancel"}),(0,b.jsx)(f.Button,{type:"submit",disabled:!k.trim()||x,children:x?"Posting...":"Share Post"})]})]})]})]})]})]})}var M=a.i(69012),N=a.i(23312);function O(){let{user:a}=(0,o.useAuth)(),[i,l]=(0,c.useState)(""),[n,s]=(0,c.useState)(null),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1);(0,c.useEffect)(()=>{y(!0)},[]);let A=async()=>{if(a&&x)try{w(!0);let{data:a,error:b}=await p.supabaseService.getClient().from("community_posts").select(`
          *,
          user:users(id, username, full_name, avatar_url)
        `).order("created_at",{ascending:!1}).limit(50);if(b)return void console.error("Error fetching posts:",b);u(a||[])}catch(a){console.error("Error fetching posts:",a)}finally{w(!1)}};(0,c.useEffect)(()=>{a&&x&&A()},[a,x]);let B=t.filter(a=>a.content.toLowerCase().includes(i.toLowerCase()));return(0,b.jsx)(d.Layout,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Community"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Connect with fellow believers, share insights, and grow together"})]}),(0,b.jsx)(j.AuthGuard,{action:"post",children:(0,b.jsx)(L,{onPostCreated:A,children:(0,b.jsxs)(f.Button,{className:"w-full sm:w-auto",children:[(0,b.jsx)(G.Plus,{className:"mr-2 h-4 w-4"}),"Create Post"]})})})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(m.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(g.Input,{placeholder:"Search posts...",value:i,onChange:a=>l(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(f.Button,{variant:"outline",children:[(0,b.jsx)(M.Filter,{className:"mr-2 h-4 w-4"}),"Filters"]})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:["Recent","Popular","Following","My Posts"].map(a=>(0,b.jsx)(r.Badge,{variant:n===a?"default":"secondary",className:"cursor-pointer",onClick:()=>s(a),children:a},a))}),(0,b.jsxs)(D.Tabs,{defaultValue:"posts",className:"space-y-4",children:[(0,b.jsxs)(D.TabsList,{className:"grid w-full grid-cols-4",children:[(0,b.jsx)(D.TabsTrigger,{value:"posts",children:"Posts"}),(0,b.jsx)(D.TabsTrigger,{value:"friends",children:"Friends"}),(0,b.jsx)(D.TabsTrigger,{value:"messages",children:"Messages"}),(0,b.jsx)(D.TabsTrigger,{value:"notifications",children:"Notifications"})]}),(0,b.jsx)(D.TabsContent,{value:"posts",className:"space-y-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-2 space-y-4",children:x?v?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading posts..."})]}):0===B.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(k.Users,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No posts yet"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Be the first to share your thoughts with the community!"})]}):B.map(a=>(0,b.jsx)("div",{children:(0,b.jsx)(e.CommunityPost,{post:a,authorName:a.user?.full_name||a.user?.username||"Unknown",authorAvatar:a.user?.avatar_url})},a.id)):(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{className:"text-lg",children:"Community Stats"})}),(0,b.jsx)(h.CardContent,{className:"space-y-3",children:(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Members"}),(0,b.jsx)("span",{className:"font-medium",children:"1"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Online Now"}),(0,b.jsx)("span",{className:"font-medium",children:"0"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Posts Today"}),(0,b.jsx)("span",{className:"font-medium",children:"0"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Prayers Shared"}),(0,b.jsx)("span",{className:"font-medium",children:"0"})]})]})})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{className:"text-lg",children:"Trending Topics"})}),(0,b.jsx)(h.CardContent,{className:"space-y-2",children:["#Prayer","#YouthMinistry","#BibleStudy","#Faith","#Community"].map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 rounded hover:bg-muted cursor-pointer",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:a}),(0,b.jsx)(r.Badge,{variant:"secondary",className:"text-xs",children:Math.floor(50*Math.random())+10})]},a))})]})]})]})}),(0,b.jsx)(D.TabsContent,{value:"friends",children:(0,b.jsx)(q,{})}),(0,b.jsx)(D.TabsContent,{value:"messages",children:(0,b.jsx)(z,{})}),(0,b.jsx)(D.TabsContent,{value:"notifications",children:(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Notifications"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(N.Bell,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No new notifications"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"You're all caught up! Check back later for updates."})]})})]})})]})]})})}a.s(["default",()=>O],24749)}];

//# sourceMappingURL=src_app_community_page_tsx_f6f410e4._.js.map