(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,68148,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(30030),r=e.i(48425),l="Progress",[i,n]=(0,t.createContextScope)(l),[d,c]=i(l),o=s.forwardRef((e,s)=>{var t,l;let{__scopeProgress:i,value:n=null,max:c,getValueLabel:o=x,...m}=e;(c||0===c)&&!g(c)&&console.error((t=`${c}`,`Invalid prop \`max\` of value \`${t}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let u=g(c)?c:100;null===n||f(n,u)||console.error((l=`${n}`,`Invalid prop \`value\` of value \`${l}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let v=f(n,u)?n:null,j=p(v)?o(v,u):void 0;return(0,a.jsx)(d,{scope:i,value:v,max:u,children:(0,a.jsx)(r.Primitive.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":p(v)?v:void 0,"aria-valuetext":j,role:"progressbar","data-state":h(v,u),"data-value":v??void 0,"data-max":u,...m,ref:s})})});o.displayName=l;var m="ProgressIndicator",u=s.forwardRef((e,s)=>{let{__scopeProgress:t,...l}=e,i=c(m,t);return(0,a.jsx)(r.Primitive.div,{"data-state":h(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...l,ref:s})});function x(e,a){return`${Math.round(e/a*100)}%`}function h(e,a){return null==e?"indeterminate":e===a?"complete":"loading"}function p(e){return"number"==typeof e}function g(e){return p(e)&&!isNaN(e)&&e>0}function f(e,a){return p(e)&&!isNaN(e)&&e<=a&&e>=0}u.displayName=m;var v=e.i(75157);let j=s.forwardRef(({className:e,value:s,...t},r)=>(0,a.jsx)(o,{ref:r,className:(0,v.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...t,children:(0,a.jsx)(u,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));j.displayName=o.displayName,e.s(["Progress",()=>j],68148)},42009,e=>{"use strict";let a=(0,e.i(75254).default)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);e.s(["Award",()=>a],42009)},70273,e=>{"use strict";let a=(0,e.i(75254).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>a],70273)},15984,e=>{"use strict";var a=e.i(7471);let s=new class{async getPublicReadingPlans(){try{let{data:e,error:s}=await a.supabase.from("reading_plans").select("*").eq("is_public",!0).order("created_at",{ascending:!1});if(s)throw s;return e||[]}catch(e){return console.error("Error fetching reading plans:",e),[]}}async getReadingPlanById(e){if(!e)return console.error("Error: No ID provided to getReadingPlanById"),null;try{console.log(`Fetching reading plan with ID: ${e}`);let{data:s,error:t}=await a.supabase.from("reading_plans").select("*").eq("id",e).single();if(t)throw console.error("Supabase error details:",{message:t.message,details:t.details,hint:t.hint}),t;if(!s)return console.error(`No reading plan found with ID: ${e}`),null;return s}catch(a){return console.error("Error in getReadingPlanById:",{error:a,errorString:String(a),errorObject:JSON.stringify(a,Object.getOwnPropertyNames(a)),planId:e}),null}}async startReadingPlan(e,s){try{let{data:t,error:r}=await a.supabase.from("user_reading_plans").insert([{user_id:e,plan_id:s,started_at:new Date().toISOString(),current_day:1,is_active:!0}]).select().single();if(r)throw r;return await this.awardPoints(e,10,"Started a reading plan"),t}catch(e){throw console.error("Error starting reading plan:",e),e}}async getUserReadingPlans(e){try{let{data:s,error:t}=await a.supabase.from("user_reading_plans").select(`
          *,
          reading_plans (*)
        `).eq("user_id",e).order("started_at",{ascending:!1});if(t)throw t;return s||[]}catch(e){return console.error("Error fetching user reading plans:",e),[]}}async getPlanProgress(e,s){try{let{data:t,error:r}=await a.supabase.from("reading_plan_progress").select("*").eq("user_id",e).eq("plan_id",s).order("day_number",{ascending:!0});if(r)throw r;return t||[]}catch(e){return console.error("Error fetching plan progress:",e),[]}}async completeDay(e,s,t,r){try{let{data:l,error:i}=await a.supabase.from("reading_plan_progress").upsert([{user_id:e,plan_id:s,day:t,completed:!0,completed_at:new Date().toISOString(),notes:r||null,points_earned:5}]).select().single();if(i)throw i;return await this.awardPoints(e,5,"Completed a reading plan day"),await a.supabase.from("user_reading_plans").update({current_day:t+1,updated_at:new Date().toISOString()}).eq("user_id",e).eq("plan_id",s),l}catch(e){throw console.error("Error completing day:",e),e}}async completeReadingPlan(e,s){try{let t=await this.getReadingPlanById(s);if(!t)throw Error("Plan not found");let r=2*t.duration,{data:l,error:i}=await a.supabase.from("user_reading_plans").update({is_active:!1,completed_at:new Date().toISOString()}).eq("user_id",e).eq("plan_id",s).select().single();if(i)throw i;return await this.awardPoints(e,r,"Completed a reading plan"),l}catch(e){throw console.error("Error completing reading plan:",e),e}}async awardPoints(e,s,t){try{let{error:r}=await a.supabase.rpc("increment_user_points",{p_user_id:e,p_points:s});if(r)throw r;let{error:l}=await a.supabase.from("activities").insert([{user_id:e,type:"reading_plan",description:t,points:s,created_at:new Date().toISOString()}]);if(l)throw l}catch(e){console.error("Error awarding points:",e)}}async getPlanStats(e){try{let{data:s,error:t}=await a.supabase.from("user_reading_plans").select("is_completed").eq("plan_id",e);if(t)throw t;let r=s?.length||0,l=s?.filter(e=>e.is_completed).length||0;return{totalParticipants:r,averageCompletion:r>0?l/r*100:0,totalCompletions:l}}catch(e){return console.error("Error fetching plan stats:",e),{totalParticipants:0,averageCompletion:0,totalCompletions:0}}}async createReadingPlan(e){try{let{data:s,error:t}=await a.supabase.from("reading_plans").insert([e]).select().single();if(t)throw t;return s}catch(e){throw console.error("Error creating reading plan:",e),e}}};e.s(["readingPlanService",0,s])},20278,e=>{"use strict";let a=(0,e.i(75254).default)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);e.s(["Target",()=>a],20278)},31343,e=>{"use strict";let a=(0,e.i(75254).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);e.s(["Play",()=>a],31343)},39312,e=>{"use strict";let a=(0,e.i(75254).default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>a],39312)},7233,87130,e=>{"use strict";var a=e.i(75254);let s=(0,a.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>s],7233);let t=(0,a.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>t],87130)},56909,e=>{"use strict";let a=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>a],56909)},26771,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(85665),r=e.i(932),l=e.i(87486),i=e.i(19455),n=e.i(68148),d=e.i(15288),c=e.i(75157),o=e.i(61911);function m(e){let s,t,i,o,m,x,h,p,g,f=(0,r.c)(27),{children:v,className:j,variant:y,badge:N,progress:b,stats:w,glowEffect:C,animated:S}=e,P=void 0===y?"default":y,_=void 0!==C&&C,k=void 0!==S&&S;f[0]!==P?(s=()=>{switch(P){case"achievement":return"bg-gradient-to-br from-yellow-50 to-amber-50 border-yellow-200 shadow-yellow-100";case"progress":return"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200 shadow-blue-100";case"streak":return"bg-gradient-to-br from-orange-50 to-red-50 border-orange-200 shadow-orange-100";case"leaderboard":return"bg-gradient-to-br from-purple-50 to-pink-50 border-purple-200 shadow-purple-100";default:return"bg-white border-gray-200 shadow-gray-100"}},f[0]=P,f[1]=s):s=f[1];let T=s;return f[2]!==k||f[3]!==j||f[4]!==T||f[5]!==_?(t=(0,c.cn)("relative overflow-hidden transition-all duration-300 hover:shadow-lg",T(),_&&"shadow-lg ring-2 ring-offset-2",k&&"animate-pulse",j),f[2]=k,f[3]=j,f[4]=T,f[5]=_,f[6]=t):t=f[6],f[7]!==_?(i=_&&(0,a.jsx)("div",{className:"absolute inset-0 bg-linear-to-r from-transparent via-white to-transparent opacity-20 animate-shimmer"}),f[7]=_,f[8]=i):i=f[8],f[9]!==N?(o=N&&(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)(l.Badge,{variant:N.variant||"default",className:"flex items-center gap-1",children:[N.icon,N.text]})}),f[9]=N,f[10]=o):o=f[10],f[11]!==b?(m=b&&(0,a.jsxs)("div",{className:"mb-4",children:[b.label&&(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,a.jsx)("span",{className:"font-medium",children:b.label}),(0,a.jsxs)("span",{className:"text-muted-foreground",children:[b.value,"/",b.max]})]}),(0,a.jsx)(n.Progress,{value:b.value,max:b.max,className:(0,c.cn)("h-2",b.color&&`bg-${b.color}-100`)})]}),f[11]=b,f[12]=m):m=f[12],f[13]!==w?(x=w&&(0,a.jsx)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:w.map(u)}),f[13]=w,f[14]=x):x=f[14],f[15]!==v||f[16]!==o||f[17]!==m||f[18]!==x?(h=(0,a.jsxs)(d.CardContent,{className:"p-6",children:[o,m,x,v]}),f[15]=v,f[16]=o,f[17]=m,f[18]=x,f[19]=h):h=f[19],f[20]!==k?(p=k&&(0,a.jsx)("div",{className:"absolute inset-0 rounded-lg border-2 border-transparent bg-linear-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-border animate-gradient-xy"}),f[20]=k,f[21]=p):p=f[21],f[22]!==h||f[23]!==p||f[24]!==t||f[25]!==i?(g=(0,a.jsxs)(d.Card,{className:t,children:[i,h,p]}),f[22]=h,f[23]=p,f[24]=t,f[25]=i,f[26]=g):g=f[26],g}function u(e,s){return(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"flex justify-center mb-1 text-muted-foreground",children:e.icon}),(0,a.jsx)("div",{className:"font-bold text-lg",children:e.value}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.label})]},s)}var x=e.i(1487),h=e.i(10980),p=e.i(31343),g=e.i(3116),f=e.i(70273),v=e.i(64030),j=e.i(58377),y=e.i(39312),N=e.i(20278),b=e.i(87316),w=e.i(42009),C=e.i(22016);function S(e){let s,t,d,u,S,_,k,T,I,R,B,D,A,E,z,$,F,L,O,q,M,G,U,V=(0,r.c)(112),{plan:H,onStartPlan:X,showProgress:J,compact:K,className:Z}=e,Y=void 0===J||J,Q=H.progress||0,W=!!H.userPlan,ee=!!H.userPlan?.completed_at,ea=H.userPlan?.current_day||1,es=P;V[0]!==Q?(s=()=>100===Q?"achievement":Q>50||Q>0?"progress":"default",V[0]=Q,V[1]=s):s=V[1];let et=s;V[2]!==H.duration||V[3]!==H.participants||V[4]!==H.points||V[5]!==H.streak?(t=()=>{let e=[{icon:(0,a.jsx)(g.Clock,{className:"h-4 w-4"}),value:H.duration,label:"days"}];return H.participants&&e.push({icon:(0,a.jsx)(o.Users,{className:"h-4 w-4"}),value:H.participants,label:"users"}),H.points&&e.push({icon:(0,a.jsx)(v.Trophy,{className:"h-4 w-4"}),value:H.points,label:"points"}),H.streak&&H.streak>0&&e.push({icon:(0,a.jsx)(j.Flame,{className:"h-4 w-4"}),value:H.streak,label:"streak"}),e},V[2]=H.duration,V[3]=H.participants,V[4]=H.points,V[5]=H.streak,V[6]=t):t=V[6];let er=t;if(void 0!==K&&K){let e,s,t,r,d,o,u,h,p,f,j,y,N,b=et();V[7]!==Z?(e=(0,c.cn)("cursor-pointer hover:scale-105 transition-transform",Z),V[7]=Z,V[8]=e):e=V[8];let w=Q>0&&Q<100;V[9]!==H.title?(s=(0,a.jsx)(x.ResponsiveText,{size:"lg",weight:"semibold",className:"mb-1",children:H.title}),V[9]=H.title,V[10]=s):s=V[10];let S=es(H.difficulty);V[11]!==H.difficulty||V[12]!==S?(t=(0,a.jsx)(l.Badge,{className:S,children:H.difficulty}),V[11]=H.difficulty,V[12]=S,V[13]=t):t=V[13],V[14]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)(g.Clock,{className:"h-3 w-3 mr-1"}),V[14]=r):r=V[14],V[15]!==H.duration?(d=(0,a.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[r,H.duration," days"]}),V[15]=H.duration,V[16]=d):d=V[16],V[17]!==t||V[18]!==d?(o=(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[t,d]}),V[17]=t,V[18]=d,V[19]=o):o=V[19],V[20]!==W||V[21]!==Q||V[22]!==Y?(u=Y&&W&&(0,a.jsx)(n.Progress,{value:Q,className:"h-2"}),V[20]=W,V[21]=Q,V[22]=Y,V[23]=u):u=V[23],V[24]!==o||V[25]!==u||V[26]!==s?(h=(0,a.jsxs)("div",{className:"flex-1",children:[s,o,u]}),V[24]=o,V[25]=u,V[26]=s,V[27]=h):h=V[27],V[28]!==ee?(p=ee&&(0,a.jsx)(v.Trophy,{className:"h-5 w-5 text-yellow-500"}),V[28]=ee,V[29]=p):p=V[29];let P=`/plans/${H.id}`,_=W?"Continue":"Start";return V[30]!==P||V[31]!==_?(f=(0,a.jsx)(i.Button,{size:"sm",asChild:!0,children:(0,a.jsx)(C.default,{href:P,children:_})}),V[30]=P,V[31]=_,V[32]=f):f=V[32],V[33]!==p||V[34]!==f?(j=(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[p,f]}),V[33]=p,V[34]=f,V[35]=j):j=V[35],V[36]!==h||V[37]!==j?(y=(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[h,j]}),V[36]=h,V[37]=j,V[38]=y):y=V[38],V[39]!==ee||V[40]!==y||V[41]!==b||V[42]!==e||V[43]!==w?(N=(0,a.jsx)(m,{variant:b,className:e,glowEffect:ee,animated:w,children:y}),V[39]=ee,V[40]=y,V[41]=b,V[42]=e,V[43]=w,V[44]=N):N=V[44],N}let el=et();V[45]!==Z?(d=(0,c.cn)("hover:scale-105 transition-transform",Z),V[45]=Z,V[46]=d):d=V[46];let ei=Q>0&&Q<100;V[47]!==ee||V[48]!==Q?(u=ee?{text:"Completed",icon:(0,a.jsx)(v.Trophy,{className:"h-3 w-3"}),variant:"default"}:Q>0?{text:`${Math.round(Q)}% Complete`,variant:"secondary"}:void 0,V[47]=ee,V[48]=Q,V[49]=u):u=V[49],V[50]!==ea||V[51]!==W||V[52]!==H.duration||V[53]!==Q||V[54]!==Y?(S=Y&&W?{value:Q,max:100,label:`Day ${ea} of ${H.duration}`,color:Q>50?"green":Q>0?"blue":"gray"}:void 0,V[50]=ea,V[51]=W,V[52]=H.duration,V[53]=Q,V[54]=Y,V[55]=S):S=V[55],V[56]!==er?(_=er(),V[56]=er,V[57]=_):_=V[57],V[58]!==H.title?(k=(0,a.jsx)(x.ResponsiveText,{size:"xl",weight:"semibold",className:"mb-2",children:H.title}),V[58]=H.title,V[59]=k):k=V[59],V[60]!==H.description?(T=(0,a.jsx)(x.ResponsiveText,{size:"sm",color:"secondary",className:"line-clamp-2",children:H.description}),V[60]=H.description,V[61]=T):T=V[61],V[62]!==k||V[63]!==T?(I=(0,a.jsxs)("div",{className:"flex-1",children:[k,T]}),V[62]=k,V[63]=T,V[64]=I):I=V[64],V[65]!==ee?(R=ee&&(0,a.jsx)("div",{className:"ml-4",children:(0,a.jsx)(v.Trophy,{className:"h-8 w-8 text-yellow-500 animate-bounce"})}),V[65]=ee,V[66]=R):R=V[66],V[67]!==I||V[68]!==R?(B=(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[I,R]}),V[67]=I,V[68]=R,V[69]=B):B=V[69];let en=es(H.difficulty);V[70]!==H.difficulty||V[71]!==en?(D=(0,a.jsx)(l.Badge,{className:en,children:H.difficulty}),V[70]=H.difficulty,V[71]=en,V[72]=D):D=V[72],V[73]===Symbol.for("react.memo_cache_sentinel")?(A=(0,a.jsx)(b.Calendar,{className:"h-3 w-3 mr-1"}),V[73]=A):A=V[73],V[74]!==H.duration?(E=(0,a.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[A,H.duration," days"]}),V[74]=H.duration,V[75]=E):E=V[75],V[76]!==H.participants?(z=H.participants&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,a.jsx)(o.Users,{className:"h-3 w-3 mr-1"}),H.participants," joined"]}),V[76]=H.participants,V[77]=z):z=V[77],V[78]!==H.points?($=H.points&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,a.jsx)(w.Award,{className:"h-3 w-3 mr-1"}),H.points," points"]}),V[78]=H.points,V[79]=$):$=V[79],V[80]!==D||V[81]!==E||V[82]!==z||V[83]!==$?(F=(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[D,E,z,$]}),V[80]=D,V[81]=E,V[82]=z,V[83]=$,V[84]=F):F=V[84],V[85]!==ea||V[86]!==W||V[87]!==X||V[88]!==H.id||V[89]!==Q?(L=W?(0,a.jsx)(i.Button,{className:"flex-1",size:"lg",asChild:!0,children:(0,a.jsxs)(C.default,{href:`/plans/${H.id}/day/${ea}`,children:[(0,a.jsx)(h.BookOpen,{className:"h-4 w-4 mr-2"}),Q>0?"Continue Reading":"Start Reading"," (Day ",ea,")"]})}):(0,a.jsxs)(i.Button,{className:"flex-1",size:"lg",onClick:()=>X?.(H.id),children:[(0,a.jsx)(p.Play,{className:"h-4 w-4 mr-2"}),"Start Plan"]}),V[85]=ea,V[86]=W,V[87]=X,V[88]=H.id,V[89]=Q,V[90]=L):L=V[90];let ed=`/plans/${H.id}`;return V[91]!==ed?(O=(0,a.jsx)(i.Button,{variant:"outline",size:"lg",asChild:!0,children:(0,a.jsx)(C.default,{href:ed,children:"View Details"})}),V[91]=ed,V[92]=O):O=V[92],V[93]!==L||V[94]!==O?(q=(0,a.jsxs)("div",{className:"flex gap-2",children:[L,O]}),V[93]=L,V[94]=O,V[95]=q):q=V[95],V[96]!==Q?(M=Q>0&&(0,a.jsxs)("div",{className:"flex items-center justify-center gap-4 pt-2 border-t",children:[Q>=25&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,a.jsx)(f.Star,{className:"h-4 w-4 text-blue-500"}),"Started"]}),Q>=50&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,a.jsx)(y.Zap,{className:"h-4 w-4 text-yellow-500"}),"Halfway"]}),Q>=75&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,a.jsx)(N.Target,{className:"h-4 w-4 text-orange-500"}),"Almost There"]}),100===Q&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,a.jsx)(v.Trophy,{className:"h-4 w-4 text-yellow-500"}),"Completed"]})]}),V[96]=Q,V[97]=M):M=V[97],V[98]!==B||V[99]!==F||V[100]!==q||V[101]!==M?(G=(0,a.jsxs)("div",{className:"space-y-4",children:[B,F,q,M]}),V[98]=B,V[99]=F,V[100]=q,V[101]=M,V[102]=G):G=V[102],V[103]!==ee||V[104]!==_||V[105]!==G||V[106]!==el||V[107]!==d||V[108]!==ei||V[109]!==u||V[110]!==S?(U=(0,a.jsx)(m,{variant:el,className:d,glowEffect:ee,animated:ei,badge:u,progress:S,stats:_,children:G}),V[103]=ee,V[104]=_,V[105]=G,V[106]=el,V[107]=d,V[108]=ei,V[109]=u,V[110]=S,V[111]=U):U=V[111],U}function P(e){switch(e){case"beginner":return"bg-green-100 text-green-800 border-green-200";case"intermediate":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"advanced":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}}var _=e.i(93479),k=e.i(24687),T=e.i(67489),I=e.i(77572),R=e.i(7233),B=e.i(37727),D=e.i(56909),A=e.i(83086),E=e.i(31278),z=e.i(27142),$=e.i(57223),F=e.i(46462);function L({onSave:e,onCancel:t}){let[r,n]=(0,s.useState)(""),[c,m]=(0,s.useState)(""),[u,x]=(0,s.useState)(""),[h,p]=(0,s.useState)("beginner"),[f,v]=(0,s.useState)([]),[j,y]=(0,s.useState)({title:"",passages:"",devotional:""}),[N,w]=(0,s.useState)(!1),[C,S]=(0,s.useState)(!1),[P,L]=(0,s.useState)(""),{user:O}=(0,F.useAuth)(),q=e=>{v(f.filter((a,s)=>s!==e))},M=async()=>{if(P.trim()){S(!0);try{let e=$.aiService.generateReadingPlanFromTemplate({topic:P,duration:parseInt(u)||7,difficulty:h});n(e.title),m(e.description),x(e.duration.toString()),p(e.difficulty);let a=e.readings.map((e,a)=>({id:"reading-"+Date.now()+a,day:e.day,title:e.title,passages:e.passages,devotional:e.devotional,completed:!1}));v(a)}catch(e){console.error("Error generating AI reading plan:",e),alert("Failed to generate reading plan. Please try again.")}finally{S(!1)}}},G=async()=>{if(!O)return void console.error("User not authenticated");if(!r||!u||0===f.length)return void alert("Please fill in all required fields and add at least one reading");try{w(!0);let a=await z.supabaseService.createReadingPlan(O.id,{title:r,description:c,duration:parseInt(u),difficulty:h,is_public:!0});a?(await z.supabaseService.addPoints(O.id,15),e&&e(a)):console.error("Failed to create reading plan")}catch(e){console.error("Error creating reading plan:",e)}finally{w(!1)}};return(0,a.jsxs)(d.Card,{className:"w-full max-w-4xl mx-auto",children:[(0,a.jsx)(d.CardHeader,{children:(0,a.jsxs)(d.CardTitle,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Create Reading Plan"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(i.Button,{variant:"outline",onClick:t,children:"Cancel"}),(0,a.jsxs)(i.Button,{onClick:G,disabled:N,children:[(0,a.jsx)(D.Save,{className:"h-4 w-4 mr-2"}),N?"Saving...":"Save Plan"]})]})]})}),(0,a.jsx)(d.CardContent,{className:"space-y-6",children:(0,a.jsxs)(I.Tabs,{defaultValue:"manual",className:"w-full",children:[(0,a.jsxs)(I.TabsList,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(I.TabsTrigger,{value:"manual",children:"Manual"}),(0,a.jsxs)(I.TabsTrigger,{value:"ai",className:"flex items-center gap-2",children:[(0,a.jsx)(A.Sparkles,{className:"h-4 w-4"}),"AI Assist"]})]}),(0,a.jsxs)(I.TabsContent,{value:"manual",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Title"}),(0,a.jsx)(_.Input,{placeholder:"Enter plan title...",value:r,onChange:e=>n(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Description"}),(0,a.jsx)(k.Textarea,{placeholder:"Describe your reading plan...",value:c,onChange:e=>m(e.target.value),rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Duration (days)"}),(0,a.jsx)(_.Input,{type:"number",placeholder:"30",value:u,onChange:e=>x(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Difficulty"}),(0,a.jsxs)(T.Select,{value:h,onValueChange:e=>p(e),children:[(0,a.jsx)(T.SelectTrigger,{children:(0,a.jsx)(T.SelectValue,{})}),(0,a.jsxs)(T.SelectContent,{children:[(0,a.jsx)(T.SelectItem,{value:"beginner",children:"Beginner"}),(0,a.jsx)(T.SelectItem,{value:"intermediate",children:"Intermediate"}),(0,a.jsx)(T.SelectItem,{value:"advanced",children:"Advanced"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Daily Readings"}),(0,a.jsx)(d.Card,{children:(0,a.jsxs)(d.CardContent,{className:"p-4 space-y-3",children:[(0,a.jsx)(_.Input,{placeholder:"Day title...",value:j.title,onChange:e=>y({...j,title:e.target.value})}),(0,a.jsx)(_.Input,{placeholder:"Bible passages (e.g., John 3:1-21, Romans 8:28-39)",value:j.passages,onChange:e=>y({...j,passages:e.target.value})}),(0,a.jsx)(k.Textarea,{placeholder:"Optional devotional thought...",value:j.devotional,onChange:e=>y({...j,devotional:e.target.value}),rows:2}),(0,a.jsxs)(i.Button,{type:"button",onClick:()=>{j.title&&j.passages&&(v([...f,{id:"reading-"+Date.now(),day:f.length+1,title:j.title,passages:j.passages.split(",").map(e=>e.trim()),devotional:j.devotional,completed:!1}]),y({title:"",passages:"",devotional:""}))},children:[(0,a.jsx)(R.Plus,{className:"h-4 w-4 mr-2"}),"Add Reading"]})]})}),f.map((e,s)=>(0,a.jsx)(d.Card,{children:(0,a.jsx)(d.CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(l.Badge,{variant:"outline",children:["Day ",e.day]}),(0,a.jsx)("h4",{className:"font-semibold",children:e.title})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,a.jsx)("strong",{children:"Passages:"})," ",e.passages.join(", ")]}),e.devotional&&(0,a.jsx)("div",{className:"text-sm text-muted-foreground italic",children:e.devotional})]}),(0,a.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>q(s),children:(0,a.jsx)(B.X,{className:"h-4 w-4"})})]})})},e.id))]}),(r||c||f.length>0)&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Preview"}),(0,a.jsx)(d.Card,{children:(0,a.jsxs)(d.CardContent,{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:r||"Untitled Plan"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:c||"No description..."}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(b.Calendar,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[u||0," days"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(g.Clock,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:h})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(o.Users,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"0 participants"})]})]}),(0,a.jsxs)(l.Badge,{variant:"secondary",children:[f.length," reading",1!==f.length?"s":""]})]})})]})]}),(0,a.jsx)(I.TabsContent,{value:"ai",className:"space-y-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Topic"}),(0,a.jsx)(_.Input,{placeholder:"e.g., Prayer, Faith, Forgiveness...",value:P,onChange:e=>L(e.target.value),disabled:C})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Duration (days)"}),(0,a.jsx)(_.Input,{type:"number",placeholder:"7",value:u,onChange:e=>x(e.target.value),disabled:C})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Difficulty"}),(0,a.jsxs)(T.Select,{value:h,onValueChange:e=>p(e),disabled:C,children:[(0,a.jsx)(T.SelectTrigger,{children:(0,a.jsx)(T.SelectValue,{})}),(0,a.jsxs)(T.SelectContent,{children:[(0,a.jsx)(T.SelectItem,{value:"beginner",children:"Beginner"}),(0,a.jsx)(T.SelectItem,{value:"intermediate",children:"Intermediate"}),(0,a.jsx)(T.SelectItem,{value:"advanced",children:"Advanced"})]})]})]}),(0,a.jsx)(i.Button,{onClick:M,disabled:!P.trim()||C,className:"w-full",children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.Sparkles,{className:"mr-2 h-4 w-4"}),"Generate Reading Plan"]})}),(r||f.length>0)&&(0,a.jsxs)("div",{className:"space-y-4 border rounded-lg p-4 bg-muted/50",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Generated Title"}),(0,a.jsx)(_.Input,{value:r,onChange:e=>n(e.target.value),placeholder:"Generated title will appear here...",disabled:N})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Generated Description"}),(0,a.jsx)(k.Textarea,{value:c,onChange:e=>m(e.target.value),placeholder:"Generated description will appear here...",className:"min-h-[100px]",disabled:N})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium",children:["Generated Readings (",f.length,")"]}),(0,a.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:f.map((e,s)=>(0,a.jsx)(d.Card,{children:(0,a.jsx)(d.CardContent,{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsxs)(l.Badge,{variant:"outline",children:["Day ",e.day]}),(0,a.jsx)("h4",{className:"font-semibold text-sm",children:e.title})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,a.jsx)("strong",{children:"Passages:"})," ",e.passages.join(", ")]}),e.devotional&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground italic mt-1",children:[e.devotional.substring(0,100),"..."]})]}),(0,a.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>q(s),disabled:N,children:(0,a.jsx)(B.X,{className:"h-4 w-4"})})]})})},e.id))})]})]})]})})]})})]})}var O=e.i(15984),q=e.i(55436),M=e.i(87130);function G(){let{user:e}=(0,F.useAuth)(),[r,n]=(0,s.useState)(""),[d,c]=(0,s.useState)(null),[o,m]=(0,s.useState)(!1),[u,h]=(0,s.useState)([]),[p,g]=(0,s.useState)([]),[f,v]=(0,s.useState)(!0);(0,s.useEffect)(()=>{j()},[]);let j=async()=>{try{v(!0);let a=await O.readingPlanService.getPublicReadingPlans();if(g(a||[]),e){let a=await O.readingPlanService.getUserReadingPlans(e.id);h(a||[])}}catch(e){console.error("Error fetching reading plans:",e)}finally{v(!1)}},y=[...u,...p].filter(e=>{if(!e)return!1;let a=r.toLowerCase(),s=e.title||"",t=e.description||"",l=s.toLowerCase().includes(a)||t.toLowerCase().includes(a),i=!d||e.difficulty===d;return l&&i}),N=async e=>{try{await j(),m(!1)}catch(e){console.error("Error saving plan:",e)}};return o?(0,a.jsx)(t.Layout,{children:(0,a.jsx)("div",{className:"py-6",children:(0,a.jsx)(L,{onSave:N,onCancel:()=>m(!1)})})}):f?(0,a.jsx)(t.Layout,{children:(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading reading plans..."})]})})}):(0,a.jsx)(t.Layout,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(x.ResponsiveText,{size:"2xl",weight:"bold",className:"mb-2",children:"Reading Plans"}),(0,a.jsx)(x.ResponsiveText,{size:"sm",color:"secondary",children:"Structured Bible reading journeys to help you grow spiritually"})]}),(0,a.jsxs)(i.Button,{onClick:()=>m(!0),className:"w-full sm:w-auto",children:[(0,a.jsx)(R.Plus,{className:"mr-2 h-4 w-4"}),"Create Plan"]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(q.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(_.Input,{placeholder:"Search reading plans...",value:r,onChange:e=>n(e.target.value),className:"pl-10 h-10 sm:h-11"})]}),(0,a.jsxs)(i.Button,{variant:"outline",className:"h-10 sm:h-11",children:[(0,a.jsx)(M.Filter,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Filters"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Filter"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)(l.Badge,{variant:null===d?"default":"secondary",className:"cursor-pointer",onClick:()=>c(null),children:"All Levels"}),["beginner","intermediate","advanced"].map(e=>(0,a.jsx)(l.Badge,{variant:d===e?"default":"secondary",className:"cursor-pointer capitalize",onClick:()=>c(e),children:e},e))]}),(0,a.jsxs)(x.ResponsiveGrid,{cols:{mobile:1,tablet:3,desktop:3},gap:"sm",children:[(0,a.jsxs)("div",{className:"text-center p-4 sm:p-6 border rounded-lg",children:[(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-blue-500",children:[...u,...p].length}),(0,a.jsx)("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Available Plans"})]}),(0,a.jsxs)("div",{className:"text-center p-4 sm:p-6 border rounded-lg",children:[(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-green-500",children:[...u,...p].reduce((e,a)=>e+(a.participants||0),0).toLocaleString()}),(0,a.jsx)("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Active Participants"})]}),(0,a.jsxs)("div",{className:"text-center p-4 sm:p-6 border rounded-lg",children:[(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-yellow-500",children:([...u,...p].reduce((e,a)=>e+(a.rating||0),0)/[...u,...p].length||0).toFixed(1)}),(0,a.jsx)("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Average Rating"})]})]}),(0,a.jsx)(x.ResponsiveGrid,{cols:{mobile:1,tablet:1,desktop:3},gap:"md",children:y.map(e=>(0,a.jsx)(S,{plan:e,onStartPlan:async e=>{console.log("Starting plan:",e)}},e.id))}),0===y.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(b.Calendar,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No reading plans found"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Try adjusting your search or filters to find what you're looking for, or create your own plan."}),(0,a.jsxs)(i.Button,{className:"mt-4",onClick:()=>m(!0),children:[(0,a.jsx)(R.Plus,{className:"mr-2 h-4 w-4"}),"Create Your First Plan"]})]})]})})}e.s(["default",()=>G],26771)}]);