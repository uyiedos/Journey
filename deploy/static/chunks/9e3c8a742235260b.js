(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,68148,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(30030),r=e.i(48425),i="Progress",[n,o]=(0,s.createContextScope)(i),[l,c]=n(i),d=a.forwardRef((e,a)=>{var s,i;let{__scopeProgress:n,value:o=null,max:c,getValueLabel:d=u,...m}=e;(c||0===c)&&!f(c)&&console.error((s=`${c}`,`Invalid prop \`max\` of value \`${s}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let h=f(c)?c:100;null===o||x(o,h)||console.error((i=`${o}`,`Invalid prop \`value\` of value \`${i}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let y=x(o,h)?o:null,v=g(y)?d(y,h):void 0;return(0,t.jsx)(l,{scope:n,value:y,max:h,children:(0,t.jsx)(r.Primitive.div,{"aria-valuemax":h,"aria-valuemin":0,"aria-valuenow":g(y)?y:void 0,"aria-valuetext":v,role:"progressbar","data-state":p(y,h),"data-value":y??void 0,"data-max":h,...m,ref:a})})});d.displayName=i;var m="ProgressIndicator",h=a.forwardRef((e,a)=>{let{__scopeProgress:s,...i}=e,n=c(m,s);return(0,t.jsx)(r.Primitive.div,{"data-state":p(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...i,ref:a})});function u(e,t){return`${Math.round(e/t*100)}%`}function p(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function g(e){return"number"==typeof e}function f(e){return g(e)&&!isNaN(e)&&e>0}function x(e,t){return g(e)&&!isNaN(e)&&e<=t&&e>=0}h.displayName=m;var y=e.i(75157);let v=a.forwardRef(({className:e,value:a,...s},r)=>(0,t.jsx)(d,{ref:r,className:(0,y.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...s,children:(0,t.jsx)(h,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})}));v.displayName=d.displayName,e.s(["Progress",()=>v],68148)},58709,e=>{"use strict";var t=e.i(43476),a=e.i(932),s=e.i(46462),r=e.i(19455),i=e.i(15288),n=e.i(22016),o=e.i(4997),l=e.i(90597),c=e.i(94983),d=e.i(79002);let m=(0,e.i(75254).default)("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);var h=e.i(83086);function u(e){let u,p,g,f,x,y,v=(0,a.c)(16),{children:w,action:b,fallback:j}=e,{user:N}=(0,s.useAuth)();if(N){let e;return v[0]!==w?(e=(0,t.jsx)(t.Fragment,{children:w}),v[0]=w,v[1]=e):e=v[1],e}if(j){let e;return v[2]!==j?(e=(0,t.jsx)(t.Fragment,{children:j}),v[2]=j,v[3]=e):e=v[3],e}v[4]===Symbol.for("react.memo_cache_sentinel")?(u={post:{title:"Sign in to Post",description:"Join our community to share your thoughts and devotionals",icon:m},comment:{title:"Sign in to Comment",description:"Share your thoughts and engage with the community",icon:c.MessageCircle},like:{title:"Sign in to Like",description:"Show appreciation for posts that inspire you",icon:l.Heart},friend:{title:"Sign in to Add Friends",description:"Connect with others on their spiritual journey",icon:d.UserPlus},devotional:{title:"Sign in to Create Devotionals",description:"Share your insights and inspire others",icon:m},"ai-tools":{title:"Sign in to Use AI Tools",description:"Generate personalized reading plans, devotionals, and Bible studies with AI",icon:h.Sparkles}},v[4]=u):u=v[4];let _=u[b],C=_.icon;return v[5]!==C?(p=(0,t.jsx)("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:(0,t.jsx)(C,{className:"h-6 w-6 text-primary"})}),v[5]=C,v[6]=p):p=v[6],v[7]!==_.title?(g=(0,t.jsx)(i.CardTitle,{className:"text-lg mb-2",children:_.title}),v[7]=_.title,v[8]=g):g=v[8],v[9]!==_.description?(f=(0,t.jsx)(i.CardDescription,{className:"mb-4",children:_.description}),v[9]=_.description,v[10]=f):f=v[10],v[11]===Symbol.for("react.memo_cache_sentinel")?(x=(0,t.jsx)(n.default,{href:"/auth",children:(0,t.jsxs)(r.Button,{className:"w-full",children:[(0,t.jsx)(o.LogIn,{className:"mr-2 h-4 w-4"}),"Sign In to Continue"]})}),v[11]=x):x=v[11],v[12]!==p||v[13]!==g||v[14]!==f?(y=(0,t.jsx)(i.Card,{className:"border-dashed border-muted-foreground/30 bg-muted/30",children:(0,t.jsxs)(i.CardContent,{className:"p-6 text-center",children:[p,g,f,x]})}),v[12]=p,v[13]=g,v[14]=f,v[15]=y):y=v[15],y}e.s(["AuthGuard",()=>u],58709)},82651,e=>{"use strict";let t=[{id:"genesis",name:"Genesis",testament:"old",chapters:50},{id:"exodus",name:"Exodus",testament:"old",chapters:40},{id:"leviticus",name:"Leviticus",testament:"old",chapters:27},{id:"numbers",name:"Numbers",testament:"old",chapters:36},{id:"deuteronomy",name:"Deuteronomy",testament:"old",chapters:34},{id:"joshua",name:"Joshua",testament:"old",chapters:24},{id:"judges",name:"Judges",testament:"old",chapters:21},{id:"ruth",name:"Ruth",testament:"old",chapters:4},{id:"1-samuel",name:"1 Samuel",testament:"old",chapters:31},{id:"2-samuel",name:"2 Samuel",testament:"old",chapters:24},{id:"1-kings",name:"1 Kings",testament:"old",chapters:22},{id:"2-kings",name:"2 Kings",testament:"old",chapters:25},{id:"1-chronicles",name:"1 Chronicles",testament:"old",chapters:29},{id:"2-chronicles",name:"2 Chronicles",testament:"old",chapters:36},{id:"ezra",name:"Ezra",testament:"old",chapters:10},{id:"nehemiah",name:"Nehemiah",testament:"old",chapters:13},{id:"esther",name:"Esther",testament:"old",chapters:10},{id:"job",name:"Job",testament:"old",chapters:42},{id:"psalms",name:"Psalms",testament:"old",chapters:150},{id:"proverbs",name:"Proverbs",testament:"old",chapters:31},{id:"ecclesiastes",name:"Ecclesiastes",testament:"old",chapters:12},{id:"song-of-solomon",name:"Song of Solomon",testament:"old",chapters:8},{id:"isaiah",name:"Isaiah",testament:"old",chapters:66},{id:"jeremiah",name:"Jeremiah",testament:"old",chapters:52},{id:"lamentations",name:"Lamentations",testament:"old",chapters:5},{id:"ezekiel",name:"Ezekiel",testament:"old",chapters:48},{id:"daniel",name:"Daniel",testament:"old",chapters:12},{id:"hosea",name:"Hosea",testament:"old",chapters:14},{id:"joel",name:"Joel",testament:"old",chapters:3},{id:"amos",name:"Amos",testament:"old",chapters:9},{id:"obadiah",name:"Obadiah",testament:"old",chapters:1},{id:"jonah",name:"Jonah",testament:"old",chapters:4},{id:"micah",name:"Micah",testament:"old",chapters:7},{id:"nahum",name:"Nahum",testament:"old",chapters:3},{id:"habakkuk",name:"Habakkuk",testament:"old",chapters:3},{id:"zephaniah",name:"Zephaniah",testament:"old",chapters:3},{id:"haggai",name:"Haggai",testament:"old",chapters:2},{id:"zechariah",name:"Zechariah",testament:"old",chapters:14},{id:"malachi",name:"Malachi",testament:"old",chapters:4},{id:"matthew",name:"Matthew",testament:"new",chapters:28},{id:"mark",name:"Mark",testament:"new",chapters:16},{id:"luke",name:"Luke",testament:"new",chapters:24},{id:"john",name:"John",testament:"new",chapters:21},{id:"acts",name:"Acts",testament:"new",chapters:28},{id:"romans",name:"Romans",testament:"new",chapters:16},{id:"1-corinthians",name:"1 Corinthians",testament:"new",chapters:16},{id:"2-corinthians",name:"2 Corinthians",testament:"new",chapters:13},{id:"galatians",name:"Galatians",testament:"new",chapters:6},{id:"ephesians",name:"Ephesians",testament:"new",chapters:6},{id:"philippians",name:"Philippians",testament:"new",chapters:4},{id:"colossians",name:"Colossians",testament:"new",chapters:4},{id:"1-thessalonians",name:"1 Thessalonians",testament:"new",chapters:5},{id:"2-thessalonians",name:"2 Thessalonians",testament:"new",chapters:3},{id:"1-timothy",name:"1 Timothy",testament:"new",chapters:6},{id:"2-timothy",name:"2 Timothy",testament:"new",chapters:4},{id:"titus",name:"Titus",testament:"new",chapters:3},{id:"philemon",name:"Philemon",testament:"new",chapters:1},{id:"hebrews",name:"Hebrews",testament:"new",chapters:13},{id:"james",name:"James",testament:"new",chapters:5},{id:"1-peter",name:"1 Peter",testament:"new",chapters:5},{id:"2-peter",name:"2 Peter",testament:"new",chapters:3},{id:"1-john",name:"1 John",testament:"new",chapters:5},{id:"2-john",name:"2 John",testament:"new",chapters:1},{id:"3-john",name:"3 John",testament:"new",chapters:1},{id:"jude",name:"Jude",testament:"new",chapters:1},{id:"revelation",name:"Revelation",testament:"new",chapters:22}];e.s(["getBookById",0,e=>t.find(t=>t.id===e),"getBooksByTestament",0,e=>t.filter(t=>t.testament===e),"sampleVerses",0,[{id:"john-3-16",number:16,text:"For God so loved the world, that he gave his only Son, that whoever believes in him should not perish but have eternal life."},{id:"romans-8-28",number:28,text:"And we know that for those who love God all things work together for good, for those who are called according to his purpose."},{id:"philippians-4-13",number:13,text:"I can do all things through him who strengthens me."},{id:"jeremiah-29-11",number:11,text:"For I know the plans I have for you, declares the Lord, plans for welfare and not for evil, to give you a future and a hope."},{id:"isaiah-41-10",number:10,text:"Fear not, for I am with you; be not dismayed, for I am your God; I will strengthen you, I will help you, I will uphold you with my righteous right hand."}]])},24687,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));r.displayName="Textarea",e.s(["Textarea",()=>r])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},57223,e=>{"use strict";let t={name:"Virgo",title:"Master of Scriptures",description:"Guided by the Holy Trinity, keeper of divine wisdom and sacred mysteries",greeting:"I am Virgo, master of scriptures, empowered by the Father, Son, and Holy Spirit. Through divine wisdom, I shall guide you through the sacred texts.",signature:"In divine wisdom,\nVirgo, Master of Scriptures"},a=new class{webLLM=null;isWebLLMLoaded=!1;constructor(){this.initializeWebLLM()}async initializeWebLLM(){if(!this.isWebLLMLoaded)try{let e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/@mlc-ai/web-llm@0.2.46/dist/mlc-web-llm.js",e.async=!0,e.onload=()=>{this.isWebLLMLoaded=!0,console.log("Web LLM loaded successfully")},document.head.appendChild(e)}catch(e){console.warn("Failed to load Web LLM:",e)}}generateReadingPlanFromTemplate(e){let t=this.getReadingPlanTemplates(),a=t.find(t=>t.topic.toLowerCase().includes(e.topic.toLowerCase()))||t.find(t=>t.difficulty===e.difficulty)||t[0];return{title:`${e.topic} Study Plan`,description:`A ${e.duration}-day journey through ${e.topic} with ${e.difficulty} level content.`,duration:e.duration,difficulty:e.difficulty,readings:this.generateReadingsFromTemplate(a,e.duration),tags:[e.topic,e.difficulty,...e.focus_areas||[]]}}async generateReadingPlanWithAI(e){if(this.isWebLLMLoaded&&this.webLLM)try{return await this.generateWithWebLLM(e)}catch(e){console.warn("Web LLM failed, falling back to template:",e)}return this.generateReadingPlanFromTemplate(e)}async generateWithWebLLM(e){return e.duration,e.topic,e.difficulty,e.focus_areas?.join(", "),e.duration,this.generateReadingPlanFromTemplate(e)}generateDevotional(e,t){let a=this.getDevotionalTemplates(),s=a.find(t=>t.verse===e)||a.find(e=>e.theme===t)||a[0];return{title:s.title,verse:s.verse,verse_text:s.verse_text,main_message:s.main_message,application:s.application,prayer:s.prayer,reflection_questions:s.reflection_questions}}generateBibleStudy(e){let t=this.getBibleStudyGuides();return t.find(t=>t.topic.toLowerCase().includes(e.toLowerCase()))||t[0]}getPrayerGuidance(e){let t=this.getPrayerGuides();return t.find(t=>t.intention.toLowerCase().includes(e.toLowerCase()))||t[0]}getReadingPlanTemplates(){return[{topic:"Prayer",difficulty:"beginner",readings:[{title:"Understanding Prayer",passages:["Matthew 6:5-15","Philippians 4:6-7"]},{title:"Prayer of Thanksgiving",passages:["1 Thessalonians 5:18","Psalm 100:4-5"]},{title:"Prayer for Guidance",passages:["James 1:5","Proverbs 3:5-6"]},{title:"Prayer for Strength",passages:["Isaiah 40:31","Philippians 4:13"]},{title:"Prayer for Others",passages:["1 Timothy 2:1-2","Ephesians 6:18"]}]},{topic:"Faith",difficulty:"intermediate",readings:[{title:"Foundation of Faith",passages:["Hebrews 11:1","Romans 10:17"]},{title:"Faith in Action",passages:["James 2:14-26","Galatians 5:6"]},{title:"Testing of Faith",passages:["1 Peter 1:6-7","James 1:2-4"]},{title:"Faith and Doubt",passages:["Mark 9:24","Jude 1:22"]},{title:"Growing in Faith",passages:["2 Corinthians 5:7","Colossians 2:6-7"]}]},{topic:"Love",difficulty:"advanced",readings:[{title:"God's Love",passages:["1 John 4:8","Romans 5:8"]},{title:"Love One Another",passages:["John 13:34-35","1 Corinthians 13:4-7"]},{title:"Love Your Enemies",passages:["Matthew 5:44","Luke 6:27-36"]},{title:"Love and Sacrifice",passages:["1 John 3:16","Ephesians 5:2"]},{title:"Perfect Love",passages:["1 John 4:18","1 Corinthians 13:13"]}]}]}generateReadingsFromTemplate(e,t){let a=[],s=e.readings||[];for(let e=0;e<t;e++){let t=s[e%s.length];a.push({id:`reading-${Date.now()}-${e}`,day:e+1,title:t?.title||`Day ${e+1} Reflection`,passages:t?.passages||["Psalm 23:1-6"],devotional:this.generateDevotionalText(t?.title||`Day ${e+1}`),reflection_questions:["How does this passage apply to your life today?","What is God speaking to you through this text?","How can you live out this truth this week?"],prayer_focus:`Pray for understanding and application of Day ${e+1} teachings`})}return a}generateDevotionalText(e){let t={"Understanding Prayer":"Prayer is our direct line of communication with God. It's not just about asking for things, but about building a relationship. When we pray, we acknowledge our dependence on God and open our hearts to His guidance.","Faith in Action":"True faith is never passive; it always leads to action. James reminds us that faith without works is dead. Our actions demonstrate the reality of our faith to the world around us.","God's Love":"God's love is unconditional, sacrificial, and eternal. It's not based on our performance but on His character. Understanding this love transforms how we view ourselves and others.",default:"Today's reading invites us to deepen our relationship with God. As we meditate on His Word, we discover timeless truths that speak to our current circumstances and guide us in our spiritual journey."};return t[e]||t.default}getDevotionalTemplates(){return[{title:"The Power of Prayer",verse:"Philippians 4:6-7",verse_text:"Do not be anxious about anything, but in every situation, by prayer and petition, with thanksgiving, present your requests to God. And the peace of God, which transcends all understanding, will guard your hearts and your minds in Christ Jesus.",theme:"prayer",main_message:"Prayer is our antidote to anxiety and our pathway to peace.",application:"Take every worry to God in prayer, thanking Him for His faithfulness.",prayer:"Lord, teach me to pray without ceasing and to trust You with all my concerns.",reflection_questions:["What anxieties are you carrying today?","How can you practice gratitude in prayer?","Where do you need God's peace right now?"]},{title:"Living by Faith",verse:"Hebrews 11:1",verse_text:"Now faith is confidence in what we hope for and assurance about what we do not see.",theme:"faith",main_message:"Faith is trusting God even when we cannot see the outcome.",application:"Step out in faith today, trusting God's promises even when circumstances look uncertain.",prayer:"Increase my faith, Lord, and help me trust You completely.",reflection_questions:["Where is God calling you to trust Him blindly?","How has God proven faithful in your past?","What promise do you need to claim today?"]}]}getBibleStudyGuides(){return[{topic:"Prayer",key_verses:[{reference:"Matthew 6:9-13",text:'This, then, is how you should pray: "Our Father in heaven..."',explanation:"Jesus teaches us the model prayer that covers all aspects of our relationship with God."},{reference:"1 Thessalonians 5:17",text:"Pray without ceasing.",explanation:"Prayer should be a continuous attitude, not just occasional events."}],main_themes:["Communication with God","Dependence on God","Spiritual Discipline"],life_application:"Develop a habit of regular prayer throughout your day, not just in crisis moments.",discussion_questions:["What barriers keep you from praying regularly?","How can you make prayer more conversational?","What difference would constant prayer make in your life?"]},{topic:"Faith",key_verses:[{reference:"Romans 10:17",text:"Consequently, faith comes from hearing the message, and the message is heard through the word about Christ.",explanation:"Faith grows as we engage with Scripture and learn about Christ."},{reference:"James 2:17",text:"In the same way, faith by itself, if it is not accompanied by action, is dead.",explanation:"Genuine faith always produces visible changes in how we live."}],main_themes:["Trust in God","Obedient Action","Spiritual Growth"],life_application:"Put your faith into practice by taking step of obedience that stretch your comfort zone.",discussion_questions:["How does your faith show in your daily actions?","Where is God calling you to step out in faith?","How can you strengthen your faith through Scripture?"]}]}getPrayerGuides(){return[{intention:"guidance",title:"Prayer for Divine Guidance",scripture:"Proverbs 3:5-6",prayer_points:["Trust in the Lord with all your heart","Lean not on your own understanding","Acknowledge God in all your ways","Expect God to direct your paths"],sample_prayer:"Lord, I surrender my plans to You. Guide my steps, illuminate my path, and help me trust Your perfect timing and direction for my life."},{intention:"strength",title:"Prayer for Strength",scripture:"Isaiah 40:31",prayer_points:["Wait on the Lord","Renew your strength","Mount up with wings like eagles","Run and not be weary"],sample_prayer:"Almighty God, when I am weak, You are strong. Fill me with Your power, lift me up, and enable me to persevere through every challenge."}]}async generateContentSuggestions(e,t){return({"reading-plan":["Focus on practical application","Include personal reflection questions","Balance scripture with explanation","Progress from basic to deeper concepts"],devotional:["Start with a relatable story","Connect scripture to daily life","End with a practical challenge","Include a meaningful prayer"],study:["Provide historical context","Explain difficult concepts","Include cross-references","Apply to modern life"]})[t]||[]}isAIAvailable(){return this.isWebLLMLoaded||!0}getCapabilities(){return{readingPlanGeneration:!0,devotionalGeneration:!0,bibleStudyGuides:!0,prayerGuidance:!0,contentSuggestions:!0,localProcessing:this.isWebLLMLoaded,templateBased:!0}}async createVirgoReadingPlan(e,a,s,r){let i=this.generateReadingPlanFromTemplate({topic:e,duration:a,difficulty:s});return{...i,id:`virgo-${Date.now()}`,user_id:r,created_at:new Date().toISOString(),description:`${i.description}

${t.signature}`,readings:i.readings.map((e,a)=>({...e,devotional:`${e.devotional}

${t.signature}`,title:`${e.title} - Virgo's Guidance`}))}}getVirgoIntroduction(){return t.greeting}getVirgoWisdom(e){return({faith:"Faith is the foundation upon which all spiritual journeys begin. Through the Trinity's guidance, we discover that faith is not merely belief, but a living, breathing relationship with the Divine.",prayer:"Prayer is the sacred conversation between the soul and the Creator. In the Holy Trinity's embrace, every prayer becomes a bridge between heaven and earth.",love:"Divine love flows from the Father, through the Son, and by the Holy Spirit. It is this sacred love that transforms hearts and renews minds.",wisdom:"True wisdom comes not from human understanding, but from the divine revelation granted by the Trinity. Seek wisdom, and you shall find God's perfect will.",hope:"Hope is the anchor of the soul, strengthened by the Trinity's promises. In times of trial, hope becomes the light that guides us through darkness."})[e.toLowerCase()]||`Through the Trinity's divine guidance, the path of ${e} becomes clear to those who seek with humble hearts.`}};e.s(["VIRGO_PERSONA",0,t,"aiService",0,a])},7233,87130,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],7233);let s=(0,t.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>s],87130)},56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},71930,e=>{"use strict";let t=(0,e.i(75254).default)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);e.s(["Bookmark",()=>t],71930)},62031,e=>{"use strict";let t=(0,e.i(75254).default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);e.s(["Share2",()=>t],62031)},14764,e=>{"use strict";let t=(0,e.i(75254).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],14764)},94983,e=>{"use strict";let t=(0,e.i(75254).default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);e.s(["MessageCircle",()=>t],94983)},48,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(90597),r=e.i(94983),i=e.i(62031),n=e.i(14764),o=e.i(19455),l=e.i(24687),c=e.i(99676),d=e.i(46462),m=e.i(27142);class h{static instance;static getInstance(){return h.instance||(h.instance=new h),h.instance}async toggleLike(e,t,a){try{let{data:s}=await m.supabaseService.getClient().from("likes").select("id").eq("user_id",a).eq("target_id",e).eq("target_type",t).maybeSingle();if(s)return await m.supabaseService.getClient().from("likes").delete().eq("user_id",a).eq("target_id",e).eq("target_type",t),await this.updateCount(e,t,"likes_count",-1),{liked:!1,count:await this.getCount(e,t,"likes_count")};return await m.supabaseService.getClient().from("likes").insert({user_id:a,target_id:e,target_type:t}),await this.updateCount(e,t,"likes_count",1),{liked:!0,count:await this.getCount(e,t,"likes_count")}}catch(e){throw console.error("Error toggling like:",e),e}}async hasUserLiked(e,t,a){try{let{data:s}=await m.supabaseService.getClient().from("likes").select("id").eq("user_id",a).eq("target_id",e).eq("target_type",t).maybeSingle();return!!s}catch(e){return console.error("Error checking like status:",e),!1}}async addComment(e,t,a,s){try{let{data:r,error:i}=await m.supabaseService.getClient().from("comments").insert({user_id:a,target_id:e,target_type:t,content:s.trim()}).select(`
          *,
          user:users(id, username, full_name, avatar_url)
        `).single();if(i)throw i;return await this.updateCount(e,t,"comments_count",1),r}catch(e){throw console.error("Error adding comment:",e),e}}async getComments(e,t){try{let{data:a,error:s}=await m.supabaseService.getClient().from("comments").select(`
          *,
          user:users(id, username, full_name, avatar_url)
        `).eq("target_id",e).eq("target_type",t).order("created_at",{ascending:!0});if(s)throw s;return a||[]}catch(e){return console.error("Error fetching comments:",e),[]}}async share(e,t,a){try{return await m.supabaseService.getClient().from("shares").insert({user_id:a,target_id:e,target_type:t}),await this.updateCount(e,t,"shares_count",1),{count:await this.getCount(e,t,"shares_count")}}catch(e){throw console.error("Error recording share:",e),e}}async getCount(e,t,a){try{let s="";switch(t){case"post":s="community_posts";break;case"devotional":s="devotionals";break;case"prayer":s="prayer_requests";break;default:return 0}let{data:r}=await m.supabaseService.getClient().from(s).select(a).eq("id",e).single();return r?.[a]||0}catch(e){return console.error("Error getting count:",e),0}}async updateCount(e,t,a,s){try{let r="";switch(t){case"post":r="community_posts";break;case"devotional":r="devotionals";break;case"prayer":r="prayer_requests";break;default:return}let{error:i}=await m.supabaseService.getClient().rpc("increment_count",{table_name:r,record_id:e,column_name:a,increment_value:s});if(i){let{data:t}=await m.supabaseService.getClient().from(r).select(a).eq("id",e).single();if(t){let i=Math.max(0,(t[a]||0)+s);await m.supabaseService.getClient().from(r).update({[a]:i}).eq("id",e)}}}catch(e){console.error("Error updating count:",e)}}async getUserSocialActivity(e){try{let[t,a,s]=await Promise.all([m.supabaseService.getClient().from("likes").select(`
            *,
            target:community_posts(id, content, created_at)
          `).eq("user_id",e).order("created_at",{ascending:!1}).limit(10),m.supabaseService.getClient().from("comments").select(`
            *,
            target:community_posts(id, content, created_at)
          `).eq("user_id",e).order("created_at",{ascending:!1}).limit(10),m.supabaseService.getClient().from("shares").select(`
            *,
            target:community_posts(id, content, created_at)
          `).eq("user_id",e).order("created_at",{ascending:!1}).limit(10)]);return{likes:t.data||[],comments:a.data||[],shares:s.data||[]}}catch(e){return console.error("Error fetching user social activity:",e),{likes:[],comments:[],shares:[]}}}}let u=h.getInstance();var p=e.i(75157);function g({targetId:e,targetType:m,initialLikes:h=0,initialComments:g=0,initialShares:f=0,showComments:x=!0,className:y=""}){let{user:v}=(0,d.useAuth)(),[w,b]=(0,a.useState)(!1),[j,N]=(0,a.useState)(h),[_,C]=(0,a.useState)(g),[k,S]=(0,a.useState)(f),[L,I]=(0,a.useState)(!1),[P,T]=(0,a.useState)(!1),[E,A]=(0,a.useState)(!1),[D,F]=(0,a.useState)([]),[M,G]=(0,a.useState)(!1),[B,q]=(0,a.useState)(""),[$,R]=(0,a.useState)(!1);(0,a.useEffect)(()=>{b(!0)},[]),(0,a.useEffect)(()=>{v&&w&&u.hasUserLiked(e,m,v.id).then(I)},[e,m,v,w]),(0,a.useEffect)(()=>{M&&x&&w&&z()},[M,e,m,x,w]);let z=async()=>{try{let t=await u.getComments(e,m);F(t),C(t.length)}catch(e){console.error("Error loading comments:",e)}},H=async()=>{if(!v||P||!w)return;T(!0);let t=!L,a=t?j+1:Math.max(0,j-1);I(t),N(a);try{let t=await u.toggleLike(e,m,v.id);N(t.count),I(t.liked)}catch(e){console.error("Error toggling like:",e),I(!t),N(j)}finally{T(!1)}},U=async()=>{if(v&&!E&&w){A(!0);try{let t=await u.share(e,m,v.id);S(t.count),navigator.share&&await navigator.share({title:`Check out this ${m}`,text:`Found this amazing ${m} on Journey!`,url:window.location.href})}catch(e){console.error("Error sharing:",e)}finally{A(!1)}}},W=async()=>{if(v&&B.trim()&&!$&&w){R(!0);try{let t=await u.addComment(e,m,v.id,B);F([t,...D]),C(e=>e+1),q("")}catch(e){console.error("Error adding comment:",e)}finally{R(!1)}}};return(0,t.jsxs)("div",{className:`space-y-4 ${y}`,children:[(0,t.jsx)("div",{className:"flex items-center justify-between pt-4 border-t",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(o.Button,{variant:"ghost",size:"sm",className:`text-muted-foreground hover:text-red-500 transition-colors ${L?"text-red-500":""}`,onClick:H,disabled:!v||P,children:[(0,t.jsx)(s.Heart,{className:`h-4 w-4 mr-1 ${L?"fill-current":""}`}),j]}),x&&(0,t.jsxs)(o.Button,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-blue-500 transition-colors",onClick:()=>G(!M),children:[(0,t.jsx)(r.MessageCircle,{className:"h-4 w-4 mr-1"}),_]}),(0,t.jsxs)(o.Button,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-green-500 transition-colors",onClick:U,disabled:!v||E,children:[(0,t.jsx)(i.Share2,{className:"h-4 w-4 mr-1"}),k]})]})}),x&&M&&(0,t.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[v&&(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsxs)(c.Avatar,{className:"h-8 w-8",children:[(0,t.jsx)(c.AvatarImage,{src:v.user_metadata?.avatar_url}),(0,t.jsx)(c.AvatarFallback,{children:v.email?.charAt(0)})]}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)(l.Textarea,{placeholder:"Share your thoughts...",value:B,onChange:e=>q(e.target.value),className:"min-h-[60px] resize-none"}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(o.Button,{size:"sm",onClick:W,disabled:!B.trim()||$,children:[(0,t.jsx)(n.Send,{className:"h-4 w-4 mr-1"}),$?"Posting...":"Post"]})})]})]}),(0,t.jsx)("div",{className:"space-y-3",children:0===D.length?(0,t.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:"No comments yet. Be the first to share your thoughts!"}):D.map(e=>(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsxs)(c.Avatar,{className:"h-8 w-8",children:[(0,t.jsx)(c.AvatarImage,{src:e.user?.avatar_url}),(0,t.jsx)(c.AvatarFallback,{children:e.user?.full_name?.charAt(0)||e.user?.username?.charAt(0)||"U"})]}),(0,t.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"font-medium text-sm",children:e.user?.full_name||e.user?.username||"Anonymous"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,p.formatTimeAgo)(new Date(e.created_at))})]}),(0,t.jsx)("p",{className:"text-sm text-gray-700",children:e.content})]})]},e.id))})]})]})}e.s(["SocialInteraction",()=>g],48)},25175,e=>{"use strict";var t=e.i(43476),a=e.i(932),s=e.i(15288),r=e.i(87486),i=e.i(19455),n=e.i(99676),o=e.i(71930),l=e.i(75157),c=e.i(48);function d(e){let r,d,h,u,p,g,f,x,y,v,w,b,j,N,_,C,k,S,L,I,P,T=(0,a.c)(51),{devotional:E}=e,A=E.verse?.text||E.verse_text||"",D=E.verse?`${E.verse.book||""} ${E.verse.chapter||""}:${E.verse.number||""}`:E.verse_reference||"",F=E.author_name||E.author||"Anonymous";T[0]!==E.created_at||T[1]!==E.date?(r=E.date?E.date instanceof Date?E.date:new Date(E.date):E.created_at?new Date(E.created_at):new Date,T[0]=E.created_at,T[1]=E.date,T[2]=r):r=T[2];let M=r;E.shares,T[3]!==E.tags?(d=E.tags||[],T[3]=E.tags,T[4]=d):d=T[4];let G=d;T[5]!==E.title?(h=(0,t.jsx)(s.CardTitle,{className:"text-lg",children:E.title}),T[5]=E.title,T[6]=h):h=T[6];let B=A&&D?`${A} - ${D}`:A||D;T[7]!==B?(u=(0,t.jsx)(s.CardDescription,{children:B}),T[7]=B,T[8]=u):u=T[8],T[9]!==h||T[10]!==u?(p=(0,t.jsxs)("div",{className:"space-y-1",children:[h,u]}),T[9]=h,T[10]=u,T[11]=p):p=T[11],T[12]===Symbol.for("react.memo_cache_sentinel")?(g=(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",children:(0,t.jsx)(o.Bookmark,{className:"h-4 w-4"})}),T[12]=g):g=T[12],T[13]!==p?(f=(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[p,g]}),T[13]=p,T[14]=f):f=T[14],T[15]!==F?(x=F.charAt(0).toUpperCase(),T[15]=F,T[16]=x):x=T[16],T[17]!==x?(y=(0,t.jsx)(n.Avatar,{className:"h-6 w-6",children:(0,t.jsx)(n.AvatarFallback,{children:x})}),T[17]=x,T[18]=y):y=T[18],T[19]!==F?(v=(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:F}),T[19]=F,T[20]=v):v=T[20],T[21]===Symbol.for("react.memo_cache_sentinel")?(w=(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"•"}),T[21]=w):w=T[21],T[22]!==M?(b=(0,l.formatTimeAgo)(M),T[22]=M,T[23]=b):b=T[23],T[24]!==b?(j=(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:b}),T[24]=b,T[25]=j):j=T[25],T[26]!==y||T[27]!==v||T[28]!==j?(N=(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[y,v,w,j]}),T[26]=y,T[27]=v,T[28]=j,T[29]=N):N=T[29],T[30]!==N||T[31]!==f?(_=(0,t.jsxs)(s.CardHeader,{children:[f,N]}),T[30]=N,T[31]=f,T[32]=_):_=T[32],T[33]!==E.content?(C=(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-3",children:E.content}),T[33]=E.content,T[34]=C):C=T[34],T[35]!==G?(k=G.map(m),T[35]=G,T[36]=k):k=T[36],T[37]!==k?(S=(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:k}),T[37]=k,T[38]=S):S=T[38];let q=E.likes_count||0,$=E.comments_count||0,R=E.shares_count||0;return T[39]!==E.id||T[40]!==q||T[41]!==$||T[42]!==R?(L=(0,t.jsx)(c.SocialInteraction,{targetId:E.id,targetType:"devotional",initialLikes:q,initialComments:$,initialShares:R,showComments:!1,className:"mb-4"}),T[39]=E.id,T[40]=q,T[41]=$,T[42]=R,T[43]=L):L=T[43],T[44]!==C||T[45]!==S||T[46]!==L?(I=(0,t.jsxs)(s.CardContent,{children:[C,S,L]}),T[44]=C,T[45]=S,T[46]=L,T[47]=I):I=T[47],T[48]!==_||T[49]!==I?(P=(0,t.jsxs)(s.Card,{className:"w-full",children:[_,I]}),T[48]=_,T[49]=I,T[50]=P):P=T[50],P}function m(e){return(0,t.jsxs)(r.Badge,{variant:"secondary",className:"text-xs",children:["#",e]},e)}e.s(["DevotionalCard",()=>d])},70630,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(85665),r=e.i(25175),i=e.i(19455),n=e.i(93479),o=e.i(15288),l=e.i(87486),c=e.i(24687),d=e.i(67489),m=e.i(77572),h=e.i(68148),u=e.i(10204),p=e.i(75254);let g=(0,p.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var f=e.i(37727);let x=(0,p.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var y=e.i(31278),v=e.i(7471);let w=new class{MAX_FILE_SIZE=5242880;ALLOWED_TYPES=["image/jpeg","image/png","image/gif","image/webp"];BUCKET="images";async uploadImage(e,t,a,s=!1){try{this.validateFile(e);let r=e.name.split(".").pop(),i=`${t}/${Date.now()}.${r}`,{data:n,error:o}=await v.supabase.storage.from(this.BUCKET).upload(i,e,{cacheControl:"3600",upsert:!1});if(o)throw o;let l=await this.getImageDimensions(e),{data:c,error:d}=await v.supabase.from("images").insert([{user_id:t,filename:i,original_name:e.name,file_path:n.path,file_size:e.size,mime_type:e.type,width:l.width,height:l.height,alt_text:a||null,is_public:s}]).select().single();if(d)throw d;return c}catch(e){throw console.error("Error uploading image:",e),e}}async uploadMultipleImages(e,t,a){return Promise.all(e.map((e,s)=>this.uploadImage(e,t,a?.[s])))}getPublicUrl(e){let{data:t}=v.supabase.storage.from(this.BUCKET).getPublicUrl(e);return t.publicUrl}async getUserImages(e){try{let{data:t,error:a}=await v.supabase.from("images").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(a)throw a;return t||[]}catch(e){return console.error("Error fetching user images:",e),[]}}async deleteImage(e,t){try{let{data:a,error:s}=await v.supabase.from("images").select("file_path").eq("id",e).eq("user_id",t).single();if(s)throw s;let{error:r}=await v.supabase.storage.from(this.BUCKET).remove([a.file_path]);if(r)throw r;let{error:i}=await v.supabase.from("images").delete().eq("id",e).eq("user_id",t);if(i)throw i}catch(e){throw console.error("Error deleting image:",e),e}}async updateImage(e,t,a){try{let{data:s,error:r}=await v.supabase.from("images").update(a).eq("id",e).eq("user_id",t).select().single();if(r)throw r;return s}catch(e){throw console.error("Error updating image:",e),e}}async linkImageToDevotion(e,t,a=0){try{let{error:s}=await v.supabase.from("devotion_images").insert([{devotion_id:e,image_id:t,display_order:a}]);if(s)throw s}catch(e){throw console.error("Error linking image to devotion:",e),e}}async linkImageToReadingPlan(e,t,a=0){try{let{error:s}=await v.supabase.from("reading_plan_images").insert([{plan_id:e,image_id:t,display_order:a}]);if(s)throw s}catch(e){throw console.error("Error linking image to reading plan:",e),e}}async linkImageToPost(e,t,a=0){try{let{error:s}=await v.supabase.from("post_images").insert([{post_id:e,image_id:t,display_order:a}]);if(s)throw s}catch(e){throw console.error("Error linking image to post:",e),e}}async getDevotionImages(e){try{let{data:t,error:a}=await v.supabase.from("devotion_images").select(`
          images (*)
        `).eq("devotion_id",e).order("display_order",{ascending:!0});if(a)throw a;return t?.flatMap(e=>e.images)||[]}catch(e){return console.error("Error fetching devotion images:",e),[]}}async getReadingPlanImages(e){try{let{data:t,error:a}=await v.supabase.from("reading_plan_images").select(`
          images (*)
        `).eq("plan_id",e).order("display_order",{ascending:!0});if(a)throw a;return t?.flatMap(e=>e.images)||[]}catch(e){return console.error("Error fetching reading plan images:",e),[]}}async getPostImages(e){try{let{data:t,error:a}=await v.supabase.from("post_images").select(`
          images (*)
        `).eq("post_id",e).order("display_order",{ascending:!0});if(a)throw a;return t?.flatMap(e=>e.images)||[]}catch(e){return console.error("Error fetching post images:",e),[]}}createPreview(e){return new Promise((t,a)=>{let s=new FileReader;s.onload=()=>t(s.result),s.onerror=a,s.readAsDataURL(e)})}validateFile(e){if(e.size>this.MAX_FILE_SIZE)throw Error(`File size must be less than ${this.MAX_FILE_SIZE/1024/1024}MB`);if(!this.ALLOWED_TYPES.includes(e.type))throw Error(`File type must be one of: ${this.ALLOWED_TYPES.join(", ")}`)}getImageDimensions(e){return new Promise((t,a)=>{let s=new Image;s.onload=()=>{t({width:s.width,height:s.height})},s.onerror=a,s.src=URL.createObjectURL(e)})}async compressImage(e,t=1920,a=1080,s=.8){return new Promise(r=>{let i=document.createElement("canvas"),n=i.getContext("2d"),o=new Image;o.onload=()=>{let{width:l,height:c}=o;if(l>t||c>a){let e=Math.min(t/l,a/c);l*=e,c*=e}i.width=l,i.height=c,n?.drawImage(o,0,0,l,c),i.toBlob(t=>{t?r(new File([t],e.name,{type:e.type,lastModified:Date.now()})):r(e)},e.type,s)},o.src=URL.createObjectURL(e)})}};var b=e.i(46462);function j({onImagesChange:e,maxImages:s=5,maxFileSize:r=1048576,acceptedTypes:n=["image/jpeg","image/png","image/gif","image/webp"],className:l=""}){let{user:d}=(0,b.useAuth)(),m=(0,a.useRef)(null),[p,v]=(0,a.useState)([]),[j,N]=(0,a.useState)([]),[_,C]=(0,a.useState)(!1),k=(0,a.useCallback)(async e=>{if(!e||!d)return;let t=[];for(let a=0;a<e.length&&p.length+t.length<s;a++){let s=e[a];if(s.size>r){t.push({file:s,preview:"",error:`File size must be less than ${r/1024/1024}MB`});continue}if(!n.includes(s.type)){t.push({file:s,preview:"",error:`File type must be: ${n.join(", ")}`});continue}let i=await w.createPreview(s);t.push({file:s,preview:i,uploading:!0,progress:0})}v(e=>[...e,...t])},[d,p.length,s,r,n]),S=async(t,a)=>{if(d)try{let s=await w.compressImage(t.file);v(e=>e.map((e,t)=>t===a?{...e,progress:50}:e));let r=await w.uploadImage(s,d.id,t.alt_text);v(e=>e.map((e,t)=>t===a?{...e,uploading:!1,progress:100}:e)),N(e=>[...e,r]),e?.([...j,r])}catch(e){v(e=>e.map((e,t)=>t===a?{...e,uploading:!1,error:"Upload failed"}:e))}};return a.default.useEffect(()=>{p.forEach((e,t)=>{e.uploading&&0===e.progress&&S(e,t)})},[p]),(0,t.jsxs)("div",{className:`space-y-4 ${l}`,children:[p.length<s&&(0,t.jsx)(o.Card,{className:`border-2 border-dashed transition-colors ${_?"border-blue-500 bg-blue-50":"border-gray-300"}`,onDragOver:e=>{e.preventDefault(),C(!0)},onDragLeave:e=>{e.preventDefault(),C(!1)},onDrop:e=>{e.preventDefault(),C(!1),k(e.dataTransfer.files)},children:(0,t.jsxs)(o.CardContent,{className:"flex flex-col items-center justify-center py-8",children:[(0,t.jsx)(x,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Images"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Drag and drop images here, or click to select files"}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mb-4",children:["Max ",r/1024/1024,"MB per file • ",n.join(", ")]}),(0,t.jsxs)(i.Button,{onClick:()=>m.current?.click(),disabled:!d,children:[(0,t.jsx)(g,{className:"h-4 w-4 mr-2"}),"Select Images"]}),!d&&(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Please log in to upload images"})]})]})}),(0,t.jsx)("input",{ref:m,type:"file",multiple:!0,accept:n.join(","),onChange:e=>k(e.target.files),className:"hidden"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map((e,a)=>(0,t.jsxs)(o.Card,{className:"overflow-hidden",children:[(0,t.jsxs)("div",{className:"relative",children:[e.preview&&(0,t.jsx)("img",{src:e.preview,alt:e.alt_text||"",className:"w-full h-48 object-cover"}),e.uploading&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-white text-center",children:[(0,t.jsx)(y.Loader2,{className:"h-8 w-8 animate-spin mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-sm",children:"Uploading..."}),e.progress&&(0,t.jsx)(h.Progress,{value:e.progress,className:"w-32 mt-2"})]})}),e.error&&(0,t.jsx)("div",{className:"absolute inset-0 bg-red-500 bg-opacity-75 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-white text-center p-2",children:(0,t.jsx)("p",{className:"text-sm",children:e.error})})}),(0,t.jsx)(i.Button,{size:"sm",variant:"destructive",className:"absolute top-2 right-2 h-8 w-8 p-0",onClick:()=>{v(e=>e.filter((e,t)=>t!==a))},children:(0,t.jsx)(f.X,{className:"h-4 w-4"})})]}),(0,t.jsx)(o.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{htmlFor:`alt-text-${a}`,children:"Alt Text (Optional)"}),(0,t.jsx)(c.Textarea,{id:`alt-text-${a}`,placeholder:"Describe this image for accessibility...",value:e.alt_text||"",onChange:e=>{var t;return t=e.target.value,void v(e=>e.map((e,s)=>s===a?{...e,alt_text:t}:e))},disabled:e.uploading,rows:2})]})})]},a))}),p.length>0&&(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[p.filter(e=>e.uploading).length," uploading,",j.length," completed,",p.filter(e=>e.error).length," failed"]})]})}var N=e.i(82651),_=e.i(27142),C=e.i(57223),k=e.i(69908),S=e.i(7233),L=e.i(56909),I=e.i(83086);function P({onSave:e,onCancel:s}){let{user:r}=(0,b.useAuth)(),{refreshData:h}=(0,k.useUserData)(),[u,p]=(0,a.useState)(""),[g,x]=(0,a.useState)(""),[v,P]=(0,a.useState)(""),[T,E]=(0,a.useState)([]),[A,D]=(0,a.useState)(""),[F,M]=(0,a.useState)([]),[G,B]=(0,a.useState)(!1),[q,$]=(0,a.useState)(!1),[R,z]=(0,a.useState)(""),H=r?.user_metadata?.full_name||r?.email?.split("@")[0]||"Anonymous",U=()=>{A.trim()&&!T.includes(A.trim())&&(E([...T,A.trim()]),D(""))},W=e=>{E(T.filter(t=>t!==e))},J=async()=>{if(R.trim()){$(!0);try{let e=C.aiService.generateDevotional("",R);p(e.title),x(e.main_message+"\n\nApplication: "+e.application+"\n\nPrayer: "+e.prayer),P(e.verse);let t=["devotional",R.toLowerCase()];E([...new Set([...T,...t])])}catch(e){console.error("Error generating AI devotional:",e),alert("Failed to generate devotional. Please try again.")}finally{$(!1)}}},V=async()=>{if(!r)return void console.error("User not authenticated");if(!u.trim()||!g.trim())return void console.error("Title and content are required");B(!0);try{let t=N.sampleVerses.find(e=>e.id===v),a={title:u.trim(),content:g.trim(),verse_reference:t?`Verse ${t.number}`:void 0,verse_text:t?t.text:void 0,author_name:H,tags:T.length>0?T:void 0,is_public:!0},s=await _.supabaseService.createDevotionalContent(r.id,a);if(s){if(F.length>0)for(let e=0;e<F.length;e++)await w.linkImageToDevotion(s.id,F[e].id,e);await h(),e&&e(s),p(""),x(""),P(""),E([]),D(""),M([]),console.log("Devotional created successfully:",s)}else console.error("Failed to create devotional")}catch(e){console.error("Error creating devotional:",e)}finally{B(!1)}};return(0,t.jsxs)(o.Card,{className:"w-full max-w-4xl mx-auto",children:[(0,t.jsx)(o.CardHeader,{children:(0,t.jsxs)(o.CardTitle,{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Create New Devotional"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:s,disabled:G,children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:V,disabled:G||!u.trim()||!g.trim(),children:G?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L.Save,{className:"h-4 w-4 mr-2"}),"Save Devotional"]})})]})]})}),(0,t.jsx)(o.CardContent,{className:"space-y-6",children:(0,t.jsxs)(m.Tabs,{defaultValue:"manual",className:"w-full",children:[(0,t.jsxs)(m.TabsList,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(m.TabsTrigger,{value:"manual",children:"Manual"}),(0,t.jsxs)(m.TabsTrigger,{value:"ai",className:"flex items-center gap-2",children:[(0,t.jsx)(I.Sparkles,{className:"h-4 w-4"}),"AI Assist"]})]}),(0,t.jsxs)(m.TabsContent,{value:"manual",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Title *"}),(0,t.jsx)(n.Input,{placeholder:"Enter devotional title...",value:u,onChange:e=>p(e.target.value),disabled:G})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Bible Verse"}),(0,t.jsxs)(d.Select,{value:v,onValueChange:P,disabled:G,children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{placeholder:"Select a verse..."})}),(0,t.jsx)(d.SelectContent,{children:N.sampleVerses.map(e=>(0,t.jsx)(d.SelectItem,{value:e.id,children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"font-medium",children:["Verse ",e.number]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground line-clamp-2",children:e.text})]})},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Content *"}),(0,t.jsx)(c.Textarea,{placeholder:"Write your devotional content...",value:g,onChange:e=>x(e.target.value),rows:8,disabled:G})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Tags"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(n.Input,{placeholder:"Add a tag...",value:A,onChange:e=>D(e.target.value),onKeyPress:e=>"Enter"===e.key&&U(),disabled:G}),(0,t.jsx)(i.Button,{type:"button",onClick:U,disabled:G,children:(0,t.jsx)(S.Plus,{className:"h-4 w-4"})})]}),T.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:T.map(e=>(0,t.jsxs)(l.Badge,{variant:"secondary",className:"flex items-center space-x-1",children:[(0,t.jsxs)("span",{children:["#",e]}),(0,t.jsx)(f.X,{className:"h-3 w-3 cursor-pointer",onClick:()=>W(e)})]},e))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Images (Optional)"}),(0,t.jsx)(j,{onImagesChange:M,maxImages:3,maxFileSize:1048576,className:"w-full"})]}),(u||g)&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Preview"}),(0,t.jsx)(o.Card,{children:(0,t.jsxs)(o.CardContent,{className:"p-4",children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:u||"Untitled"}),v&&(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mb-3 italic",children:['"',N.sampleVerses.find(e=>e.id===v)?.text,'"']}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:g||"No content..."}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{children:["By ",H]}),(0,t.jsx)("span",{children:"Just now"})]}),T.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:T.map(e=>(0,t.jsxs)(l.Badge,{variant:"outline",className:"text-xs",children:["#",e]},e))})]})})]})]}),(0,t.jsx)(m.TabsContent,{value:"ai",className:"space-y-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Topic or Theme"}),(0,t.jsx)(n.Input,{placeholder:"e.g., Faith, Prayer, Forgiveness, God's Love...",value:R,onChange:e=>z(e.target.value),disabled:q})]}),(0,t.jsx)(i.Button,{onClick:J,disabled:!R.trim()||q,className:"w-full",children:q?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.Sparkles,{className:"mr-2 h-4 w-4"}),"Generate Devotional"]})}),(u||g)&&(0,t.jsxs)("div",{className:"space-y-4 border rounded-lg p-4 bg-muted/50",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Generated Title"}),(0,t.jsx)(n.Input,{value:u,onChange:e=>p(e.target.value),placeholder:"Generated title will appear here...",disabled:G})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Generated Content"}),(0,t.jsx)(c.Textarea,{value:g,onChange:e=>x(e.target.value),placeholder:"Generated devotional content will appear here...",className:"min-h-[200px]",disabled:G})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Bible Verse"}),(0,t.jsxs)(d.Select,{value:v,onValueChange:P,disabled:G,children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{placeholder:"Select a Bible verse..."})}),(0,t.jsx)(d.SelectContent,{children:N.sampleVerses.map(e=>(0,t.jsx)(d.SelectItem,{value:e.id,children:e.id.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase())},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Tags"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.Input,{placeholder:"Add a tag...",value:A,onChange:e=>D(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),U()),disabled:G}),(0,t.jsx)(i.Button,{type:"button",variant:"outline",onClick:U,disabled:G,children:"Add"})]}),T.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:T.map(e=>(0,t.jsxs)(l.Badge,{variant:"outline",className:"cursor-pointer",children:["#",e,(0,t.jsx)("button",{type:"button",onClick:()=>W(e),className:"ml-1 text-xs hover:text-destructive",children:"×"})]},e))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Images (Optional)"}),(0,t.jsx)(j,{onImagesChange:M,maxImages:3,maxFileSize:1048576,className:"w-full"})]})]})]})})]})})]})}var T=e.i(58709),E=e.i(55436),A=e.i(87130),D=e.i(90597);function F(){let[e,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(null),[m,h]=(0,a.useState)(!1),[u,p]=(0,a.useState)([]),[g,f]=(0,a.useState)(!0);(0,a.useEffect)(()=>{x()},[]);let x=async()=>{try{f(!0);let{data:e,error:t}=await _.supabaseService.getClient().from("devotionals").select("*").eq("is_public",!0).order("created_at",{ascending:!1});t&&console.error("Error fetching public devotionals:",t);let{data:a,error:s}=await _.supabaseService.getClient().from("devotionals").select("*").eq("user_id",(await _.supabaseService.getClient().auth.getUser()).data.user?.id).order("created_at",{ascending:!1});s&&console.error("Error fetching user devotionals:",s);let r=[...a||[],...e||[]].filter((e,t,a)=>t===a.findIndex(t=>t.id===e.id));p(r)}catch(e){console.error("Error fetching devotionals:",e)}finally{f(!1)}},y=u.filter(t=>{let a=t.title.toLowerCase().includes(e.toLowerCase())||t.content.toLowerCase().includes(e.toLowerCase())||t.author_name&&t.author_name.toLowerCase().includes(e.toLowerCase()),s=!c||t.tags&&t.tags.includes(c);return a&&s}),v=Array.from(new Set(u.flatMap(e=>e.tags||[]))),w=async()=>{await x(),h(!1)};return m?(0,t.jsx)(s.Layout,{children:(0,t.jsx)("div",{className:"py-6",children:(0,t.jsx)(P,{onSave:w,onCancel:()=>h(!1)})})}):g?(0,t.jsx)(s.Layout,{children:(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading devotionals..."})]})})}):(0,t.jsx)(s.Layout,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Devotionals"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Daily reflections and spiritual insights to deepen your faith"})]}),(0,t.jsx)(T.AuthGuard,{action:"devotional",children:(0,t.jsxs)(i.Button,{onClick:()=>h(!0),children:[(0,t.jsx)(S.Plus,{className:"mr-2 h-4 w-4"}),"Create Devotional"]})})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(E.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(n.Input,{placeholder:"Search devotionals...",value:e,onChange:e=>o(e.target.value),className:"pl-10"})]}),(0,t.jsxs)(i.Button,{variant:"outline",children:[(0,t.jsx)(A.Filter,{className:"mr-2 h-4 w-4"}),"Filters"]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)(l.Badge,{variant:null===c?"default":"secondary",className:"cursor-pointer",onClick:()=>d(null),children:"All"}),v.map(e=>(0,t.jsxs)(l.Badge,{variant:c===e?"default":"secondary",className:"cursor-pointer",onClick:()=>d(e),children:["#",e]},e))]}),(0,t.jsx)("div",{className:"grid gap-6",children:y.map(e=>(0,t.jsx)(r.DevotionalCard,{devotional:e},e.id))}),0===y.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(D.Heart,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No devotionals found"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Try adjusting your search or filters to find what you're looking for, or create your own devotional."}),(0,t.jsxs)(i.Button,{className:"mt-4",onClick:()=>h(!0),children:[(0,t.jsx)(S.Plus,{className:"mr-2 h-4 w-4"}),"Create Your First Devotional"]})]})]})})}e.s(["default",()=>F],70630)}]);